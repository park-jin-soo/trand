<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì±„ìš°ë¯¸ íŠ¸ëœë“œ ì›ê³ ìƒì„±ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .section {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title-with-button {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copy-btn-inline {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            white-space: nowrap;
            margin-left: 15px;
        }

        .copy-btn-inline:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .copy-btn-inline:active {
            transform: translateY(0);
        }

        .btn-reset {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-reset:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .btn-reset:active {
            transform: translateY(0);
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 14px;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #6c757d;
            margin-top: 5px;
            padding: 14px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 48px;
            height: 48px;
            transition: transform 0.2s, box-shadow 0.2s;
            line-height: 1;
        }

        .btn-secondary:hover {
            background: #5a6268;
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);
            transform: translateY(-2px);
        }

        label.btn-secondary {
            padding: 14px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
            min-height: 48px;
            height: 48px;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            margin: 0;
        }

        label.btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);
        }

        .result-box {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            min-height: 100px;
            line-height: 1.8;
            font-size: 16px;
            color: #333;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .result-box strong,
        .result-box .highlight {
            font-weight: bold;
            font-size: 19px;
            color: #333;
        }

        .title-list {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .title-item {
            padding: 12px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
        }

        .title-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .title-item.selected {
            background: #667eea;
            color: white;
        }

        .hidden {
            display: none;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 13px;
        }

        .copy-btn {
            background: #28a745;
            margin-top: 10px;
        }

        .copy-btn:hover {
            background: #218838;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-weight: bold;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-item input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .radio-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 500;
            color: #333;
        }

        .blog-url-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .blog-url-input {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .blog-url-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn-crawl {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            white-space: nowrap;
        }

        .btn-crawl:hover {
            background: #138496;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(23, 162, 184, 0.4);
        }

        .btn-crawl:active {
            transform: translateY(0);
        }

        .btn-crawl:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ì±„ìš°ë¯¸ íŠ¸ëœë“œ ì›ê³  ìƒì„±ê¸°</h1>
        <p class="subtitle">íŠ¸ëœë“œ í‚¤ì›Œë“œ ê¸°ë°˜ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì›ê³  ìë™ ìƒì„± ë„êµ¬</p>

        <div style="text-align: right; margin-bottom: 20px;">
            <button class="btn-reset" onclick="_0x1h2i()">ì´ˆê¸°í™”</button>
        </div>

        <div class="section" style="background: #fff3cd; border-left-color: #ffc107;">
            <div class="section-title">API í‚¤ ì„¤ì •</div>
            <div class="warning" style="margin-bottom: 15px;">
                <strong>âš ï¸ ì¤‘ìš”:</strong> API í‚¤ëŠ” ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”. ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•˜ì§€ ë§ˆì„¸ìš”.
            </div>
            <div class="input-group">
                <label>Gemini API í‚¤</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="password" id="apiKeyInput" placeholder="AIzaSy..." style="flex: 1;">
                    <button class="btn-crawl" onclick="toggleApiKeyVisibility()" style="white-space: nowrap;">ë³´ê¸°/ìˆ¨ê¸°ê¸°</button>
                </div>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button class="btn btn-secondary" onclick="if(typeof window.saveApiKey==='function'){window.saveApiKey();}else{alert('í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');}" style="margin-top: 0; flex: 1;">API í‚¤ ì €ì¥</button>
                <button class="btn btn-secondary" onclick="if(typeof window.downloadConfig==='function'){window.downloadConfig();}else{alert('í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');}" style="margin-top: 0; flex: 1;">API ì„¤ì • íŒŒì¼ ë‹¤ìš´ë¡œë“œ</button>
                <label class="btn btn-secondary" style="margin-top: 0; cursor: pointer; flex: 1;">
                    APIì„¤ì • íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
                    <input type="file" id="configFileInput" accept=".json" style="display: none;">
                </label>
            </div>
            <div id="apiKeyStatus" style="margin-top: 10px; padding: 10px; border-radius: 8px; display: none;"></div>
        </div>

        <div class="section">
            <div class="section-title">í‚¤ì›Œë“œ ì…ë ¥ ë° ìµœì‹  ì •ë³´ ìˆ˜ì§‘</div>
            
            <div class="input-group">
                <label>í‚¤ì›Œë“œ</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="text" id="mainKeyword" placeholder="ì˜ˆ: ê°•ë‚¨ ë§›ì§‘, í™ëŒ€ ë§›ì§‘ ë“±" style="flex: 1;">
                    <button class="btn-crawl" onclick="collectAndGenerate()" id="collectBtn">ìˆ˜ì§‘ ë° ìƒì„±</button>
                </div>
                <div style="margin-top: 8px; font-size: 12px; color: #666; padding: 10px; background: #e7f3ff; border-radius: 6px; border-left: 4px solid #667eea;">
                    ğŸ’¡ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ê³  "ìˆ˜ì§‘ ë° ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì±„ìš°ë¯¸ ë°©ì¥ì˜ ì—„ì²­ë‚œ ì •ë³´ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ ìµœê·¼ ì •ë³´ë¥¼  ìˆ˜ì§‘í•œ í›„ ì œëª©ê³¼ ì›ê³ ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
                </div>
            </div>

            <div class="input-group" style="margin-top: 20px;">
                <label>íŠ¸ë Œë“œ í‚¤ì›Œë“œ ì°¸ê³  ì‚¬ì´íŠ¸</label>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px;">
                    <button class="btn-crawl" onclick="window.open('https://blackkiwi.net/service/trend', '_blank')" style="font-size: 13px; padding: 10px;">ë¸”ë™í‚¤ìœ„ íŠ¸ëœë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://www.signal.bz/', '_blank')" style="font-size: 13px; padding: 10px;">ì‹œê·¸ë„ ì‹¤ì‹œê°„ ê²€ìƒ‰ì–´</button>
                    <button class="btn-crawl" onclick="window.open('https://trends.google.co.kr/trending?geo=KR', '_blank')" style="font-size: 13px; padding: 10px;">êµ¬ê¸€ íŠ¸ëœë“œ í‚¤ì›Œë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://mktt.io/local-data/trending-keywords', '_blank')" style="font-size: 13px; padding: 10px;">ì‹¤ì‹œê°„ ì‡¼í•‘ í‚¤ì›Œë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://rank.ezme.net/', '_blank')" style="font-size: 13px; padding: 10px;">ì‹¤ì‹œê°„ ì¸ê¸° ê²€ìƒ‰ì–´</button>
                    <button class="btn-crawl" onclick="window.open('https://whereispost.com/hot/#google_vignette', '_blank')" style="font-size: 13px; padding: 10px;">ì›¨ì–´ì´ì¦ˆ í•« í‚¤ì›Œë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://search.danawa.com/keywordranking.php', '_blank')" style="font-size: 13px; padding: 10px;">ë‹¤ë‚˜ì™€ ì‡¼í•‘ í‚¤ì›Œë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://www.kinds.or.kr/', '_blank')" style="font-size: 13px; padding: 10px; background: #ff6b6b; border-color: #ff6b6b;">ë¹…ì¹´ì¸ì¦ˆ (ë°©ì¥ìµœì• )</button>
                </div>
            </div>

            <div id="blogCollectionStatus" style="display: none; margin-top: 15px; padding: 15px; background: #e7f3ff; border-radius: 8px; border-left: 4px solid #667eea;">
                <div style="font-weight: bold; margin-bottom: 10px; color: #333;">ğŸ“ ìµœì‹  ìˆ˜ì§‘ ì •ë³´:</div>
                <div id="blogStatusList" style="font-size: 14px; color: #555; line-height: 1.8;">
                    <!-- ìˆ˜ì§‘ ìƒíƒœê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ìˆ¨ê²¨ì§„ textarea (ìë™ ìˆ˜ì§‘ëœ ë‚´ìš© ì €ì¥ìš©) -->
            <textarea id="reference1" style="display: none;"></textarea>
            <textarea id="reference2" style="display: none;"></textarea>
            <textarea id="reference3" style="display: none;"></textarea>
            <textarea id="reference4" style="display: none;"></textarea>
            <textarea id="reference5" style="display: none;"></textarea>
            <textarea id="reference6" style="display: none;"></textarea>
        </div>

        <div class="section" style="background: #e8f5e9; border-left-color: #4caf50;">
            <div class="section-title">ë¸”ë¡œê·¸ or ë„¤ì´ë²„ë‰´ìŠ¤ ë¬¸ì„œ ì¹˜í™˜ìš© (ë§í¬ ì§ì ‘ ì…ë ¥)</div>
            
            <div class="input-group">
                <label>ë§í¬ ì£¼ì†Œ</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="text" id="documentUrl" placeholder="https://blog.naver.com/..." style="flex: 1;">
                    <button class="btn-crawl" onclick="collectFromUrl()" id="collectUrlBtn">ìˆ˜ì§‘</button>
                </div>
                <div style="margin-top: 8px; font-size: 12px; color: #666; padding: 10px; background: #e7f3ff; border-radius: 6px; border-left: 4px solid #667eea;">
                    ğŸ’¡ ë§í¬ë¥¼ ì…ë ¥í•˜ê³  "ìˆ˜ì§‘" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ í˜ì´ì§€ì˜ í•œê¸€ ë‚´ìš©ì„ í¬ë¡¤ë§í•©ë‹ˆë‹¤. ìˆ˜ì§‘ì´ ì™„ë£Œë˜ë©´ ìë™ìœ¼ë¡œ ì œëª©ì´ ìƒì„±ë©ë‹ˆë‹¤.
                </div>
            </div>

            <div id="urlCollectionStatus" style="display: none; margin-top: 15px; padding: 15px; background: #e7f3ff; border-radius: 8px; border-left: 4px solid #667eea;">
                <div style="font-weight: bold; margin-bottom: 10px; color: #333;">ğŸ“ ìˆ˜ì§‘ ìƒíƒœ:</div>
                <div id="urlStatusText" style="font-size: 14px; color: #555; line-height: 1.8;">
                    <!-- ìˆ˜ì§‘ ìƒíƒœê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>

        <div id="titleSection" class="section hidden">
            <div class="section-title">2. ì œëª© ì„ íƒ</div>
            <div id="titleList" class="title-list"></div>
            <div id="selectedTitleDisplay" class="hidden" style="margin-top: 20px; padding: 15px; background: #e7f3ff; border-radius: 8px; border-left: 4px solid #667eea;">
                <div style="font-weight: bold; margin-bottom: 10px; color: #333;">ì„ íƒëœ ì œëª©:</div>
                <div id="selectedTitleText" style="color: #555; font-size: 15px;"></div>
            </div>
            <button id="generateContentBtn" class="btn hidden" onclick="_0x9z0a()" style="margin-top: 15px;">í¬ìŠ¤íŒ… ì›ê³  ìƒì„±í•˜ê¸°</button>
            <button class="btn btn-secondary" onclick="_0x3j4k()" style="margin-top: 10px;">ë‹¤ì‹œ ìƒì„±í•˜ê¸°</button>
        </div>

        <div id="contentSection" class="section hidden">
            <div class="section-title section-title-with-button">
                <span>3. ìƒì„±ëœ ë³¸ë¬¸</span>
                <button class="copy-btn-inline" onclick="_0x5l6m()">ìƒì„±ëœê¸€ ë³µì‚¬</button>
            </div>
            <div id="contentResult" class="result-box"></div>
        </div>
    </div>

    <script>
        (function(){
            var _0x1a2b1=['gemini-2.5-flash'],_0x3c4d=[''];
            var _0x5e6f=_0x1a2b1[0],_0x7g8h=_0x3c4d[0];
            window._0x7g8h=_0x7g8h;
            var _0x9i0j=['https://api.allorigins.win/raw?url=','https://corsproxy.io/?','https://cors-anywhere.herokuapp.com/','https://api.codetabs.com/v1/proxy?quest=','https://thingproxy.freeboard.io/fetch/'];
            window._0x9i0j=_0x9i0j;
            var _0x1k2l='',_0x3m4n='',_0x5o6p={};
            window._0x1k2l=_0x1k2l;window._0x3m4n=_0x3m4n;window._0x5o6p=_0x5o6p;
            function _0x7q8r(){if(!_0x7g8h)throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');return `https://generativelanguage.googleapis.com/v1beta/models/${_0x5e6f}:generateContent?key=${_0x7g8h}`;}
            function _0x9s0t(){var _0x1u2v=localStorage.getItem('gemini_api_key');if(_0x1u2v){_0x7g8h=_0x1u2v;window._0x7g8h=_0x7g8h;document.getElementById('apiKeyInput').value=_0x1u2v;_0x3w4x('ì €ì¥ëœ API í‚¤ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.','success');}else{_0x3w4x('API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.','warning');}}
            function _0x5y6z(){var _0x7a8b=document.getElementById('apiKeyInput').value.trim();if(!_0x7a8b){alert('API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');return;}if(!_0x7a8b.startsWith('AIzaSy')){if(!confirm('API í‚¤ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){return;}}_0x7g8h=_0x7a8b;window._0x7g8h=_0x7g8h;localStorage.setItem('gemini_api_key',_0x7a8b);_0x3w4x('API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.','success');}
            function _0x9c0d(){var _0x1e2f=document.getElementById('apiKeyInput');if(_0x1e2f.type==='password'){_0x1e2f.type='text';}else{_0x1e2f.type='password';}}
            function _0x3w4x(_0x5g6h,_0x7i8j){var _0x9k0l=document.getElementById('apiKeyStatus');_0x9k0l.style.display='block';_0x9k0l.textContent=_0x5g6h;_0x9k0l.style.background=_0x7i8j==='success'?'#d4edda':'#fff3cd';_0x9k0l.style.border=_0x7i8j==='success'?'1px solid #c3e6cb':'1px solid #ffc107';_0x9k0l.style.color=_0x7i8j==='success'?'#155724':'#856404';setTimeout(()=>{if(_0x7i8j==='success'){_0x9k0l.style.display='none';}},3000);}
            function _0x1m2n(){var _0x3o4p=document.getElementById('apiKeyInput').value.trim()||_0x7g8h;if(!_0x3o4p){alert('ì €ì¥í•  API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.');return;}var _0x5q6r={gemini_api_key:_0x3o4p,gemini_model:_0x5e6f,saved_at:new Date().toISOString()};var _0x7s8t=new Blob([JSON.stringify(_0x5q6r,null,2)],{type:'application/json'});var _0x9u0v=URL.createObjectURL(_0x7s8t);var _0x1w2x=document.createElement('a');_0x1w2x.href=_0x9u0v;_0x1w2x.download='config.json';document.body.appendChild(_0x1w2x);_0x1w2x.click();document.body.removeChild(_0x1w2x);URL.revokeObjectURL(_0x9u0v);_0x3w4x('ì„¤ì • íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.','success');}
            function _0x3y4z(_0x5a6b){try{var _0x7c8d=_0x5a6b.target.files[0];if(!_0x7c8d){console.log('íŒŒì¼ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');return;}console.log('íŒŒì¼ ì„ íƒë¨:',_0x7c8d.name);var _0x9e0f=new FileReader();_0x9e0f.onload=function(_0x1g2h){try{console.log('íŒŒì¼ ì½ê¸° ì™„ë£Œ');var _0x3i4j=JSON.parse(_0x1g2h.target.result);console.log('JSON íŒŒì‹± ì™„ë£Œ:',_0x3i4j);if(_0x3i4j.gemini_api_key){_0x7g8h=_0x3i4j.gemini_api_key;window._0x7g8h=_0x7g8h;var _0x1e2f=document.getElementById('apiKeyInput');if(_0x1e2f){_0x1e2f.value=_0x3i4j.gemini_api_key;}localStorage.setItem('gemini_api_key',_0x3i4j.gemini_api_key);if(typeof _0x3w4x==='function'){_0x3w4x('ì„¤ì • íŒŒì¼ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.','success');}else{alert('ì„¤ì • íŒŒì¼ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');}}else{alert('ì„¤ì • íŒŒì¼ì— API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.');}}catch(_0x5k6l){console.error('JSON íŒŒì‹± ì˜¤ë¥˜:',_0x5k6l);alert('ì„¤ì • íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: '+_0x5k6l.message);}};_0x9e0f.onerror=function(_0x7g8h){console.error('íŒŒì¼ ì½ê¸° ì˜¤ë¥˜:',_0x7g8h);alert('íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');};_0x9e0f.readAsText(_0x7c8d);_0x5a6b.target.value='';}catch(_0x9i0j){console.error('ì„¤ì • íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:',_0x9i0j);alert('ì„¤ì • íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: '+_0x9i0j.message);}}
            window.addEventListener('DOMContentLoaded',function(){_0x9s0t();setTimeout(function(){var _0x1a2b=document.getElementById('configFileInput');if(_0x1a2b){console.log('ì„¤ì • íŒŒì¼ ì…ë ¥ í•„ë“œ ì°¾ìŒ');_0x1a2b.addEventListener('change',function(_0x3c4d){console.log('íŒŒì¼ ë³€ê²½ ì´ë²¤íŠ¸ ë°œìƒ');if(typeof window.loadConfigFile==='function'){console.log('loadConfigFile í•¨ìˆ˜ í˜¸ì¶œ');window.loadConfigFile(_0x3c4d);}else{console.error('loadConfigFile í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');alert('í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');}});}else{console.error('configFileInput ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');}},100);});
            window.getGeminiApiUrl=_0x7q8r;window.loadApiKey=_0x9s0t;window.saveApiKey=_0x5y6z;window.toggleApiKeyVisibility=_0x9c0d;window.showApiKeyStatus=_0x3w4x;window.downloadConfig=_0x1m2n;window.loadConfigFile=_0x3y4z;window._0x7q8r=_0x7q8r;window._0x7g8h=_0x7g8h;
            async function _0x1a2b2(){
                var _0x1c2d=document.getElementById('mainKeyword').value.trim();
                if(!_0x1c2d){alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');return;}
                var _0x3e4f=document.getElementById('collectBtn');
                var _0x5g6h=_0x3e4f.textContent;
                _0x3e4f.disabled=true;
                _0x3e4f.textContent='ìµœì‹  ì •ë³´ ìˆ˜ì§‘ ì¤‘...';
                var _0x7i8j=document.getElementById('blogCollectionStatus');
                var _0x9k0l=_0x7i8j.querySelector('#blogStatusList')||document.getElementById('blogStatusList');
                _0x7i8j.style.display='block';
                _0x9k0l.innerHTML='ì±„ìš°ë¯¸ ë°©ì¥ì˜ ì—„ì²­ë‚œ ì •ë³´ ë¡œì§ì„ ë°›ì•„ì„œ ìµœì‹  ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤...';
                try{
                    var _0x3p4q=[];
                    var _0x5r6s=0;
                    _0x9k0l.innerHTML='ğŸ” êµ¬ê¸€ ë‰´ìŠ¤ ê²€ìƒ‰ ì¤‘... (1/2)';
                    if(typeof window._0x9g0h==='function'){
                        try{
                            var _0x1n2o=await window._0x9g0h(_0x1c2d);
                            if(_0x1n2o.length===0){
                                _0x9k0l.innerHTML+='<br>âš ï¸ êµ¬ê¸€ ë‰´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„¤ì´ë²„ ë¸”ë¡œê·¸ë§Œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.';
                            }else{
                                _0x9k0l.innerHTML='<br>ğŸ“° êµ¬ê¸€ ë‰´ìŠ¤ '+_0x1n2o.length+'ê±´ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤...';
                                for(var _0x7t8u=0;_0x7t8u<_0x1n2o.length;_0x7t8u++){
                                    var _0x9v0w=_0x7t8u+1;
                                    _0x9k0l.innerHTML='ğŸ“° êµ¬ê¸€ ë‰´ìŠ¤ '+_0x9v0w+'/'+_0x1n2o.length+' ìˆ˜ì§‘ ì¤‘...';
                                    try{
                                        if(typeof window._0x7n8p==='function'){
                                            var _0x1x2y=await window._0x7n8p(_0x1n2o[_0x7t8u]);
                                            if(_0x1x2y&&_0x1x2y.trim().length>0){
                                                _0x3p4q.push(_0x1x2y);
                                                _0x5r6s++;
                                            }
                                        }
                                    }catch(_0x3z4a){
                                        console.error('ë‰´ìŠ¤ '+_0x9v0w+' ìˆ˜ì§‘ ì‹¤íŒ¨:', _0x3z4a);
                                        _0x3p4q.push('');
                                    }
                                    if(_0x7t8u<_0x1n2o.length-1){
                                        await new Promise(function(_0x5b6c){setTimeout(_0x5b6c,1500);});
                                    }
                                }
                            }
                        }catch(_0x7v8w){
                            console.log('êµ¬ê¸€ ë‰´ìŠ¤ ê²€ìƒ‰ ì‹¤íŒ¨:', _0x7v8w);
                            _0x9k0l.innerHTML+='<br>âš ï¸ êµ¬ê¸€ ë‰´ìŠ¤ ê²€ìƒ‰ ì‹¤íŒ¨. ë„¤ì´ë²„ ë¸”ë¡œê·¸ë§Œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.';
                        }
                    }else{
                        console.log('êµ¬ê¸€ ë‰´ìŠ¤ í•¨ìˆ˜ ì—†ìŒ');
                    }
                    _0x9k0l.innerHTML+='<br><br>ğŸ” ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ì¤‘... (2/2)';
                    if(typeof _0x5p6q!=='function'){
                        throw new Error('ë¸”ë¡œê·¸ ìˆ˜ì§‘ í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                    }
                    var _0x3r4s=await _0x5p6q(_0x1c2d);
                    if(_0x3r4s.length===0){
                        if(_0x3p4q.length===0){
                            throw new Error('ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                        }else{
                            _0x9k0l.innerHTML+='<br>âš ï¸ ë„¤ì´ë²„ ë¸”ë¡œê·¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. êµ¬ê¸€ ë‰´ìŠ¤ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.';
                        }
                    }else{
                        _0x9k0l.innerHTML+='<br>ğŸ“ ë„¤ì´ë²„ ë¸”ë¡œê·¸ '+_0x3r4s.length+'ê±´ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤...';
                        for(var _0x7t8u2=0;_0x7t8u2<_0x3r4s.length;_0x7t8u2++){
                            var _0x9v0w2=_0x7t8u2+1;
                            _0x9k0l.innerHTML='ğŸ“° êµ¬ê¸€ ë‰´ìŠ¤: '+_0x3p4q.length+'ê±´ ì™„ë£Œ | ğŸ“ ë„¤ì´ë²„ ë¸”ë¡œê·¸ '+_0x9v0w2+'/'+_0x3r4s.length+' ìˆ˜ì§‘ ì¤‘...';
                            try{
                                if(typeof _0x7b8c!=='function'){
                                    throw new Error('ë¸”ë¡œê·¸ í¬ë¡¤ë§ í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                                }
                                var _0x1x2y2=await _0x7b8c(_0x3r4s[_0x7t8u2]);
                                if(_0x1x2y2&&_0x1x2y2.trim().length>0){
                                    _0x3p4q.push(_0x1x2y2);
                                    _0x5r6s++;
                                }
                            }catch(_0x3z4a2){
                                console.error('ë¸”ë¡œê·¸ '+_0x9v0w2+' ìˆ˜ì§‘ ì‹¤íŒ¨:', _0x3z4a2);
                                _0x3p4q.push('');
                            }
                            if(_0x7t8u2<_0x3r4s.length-1){
                                await new Promise(function(_0x5b6c){setTimeout(_0x5b6c,1500);});
                            }
                        }
                    }
                    if(_0x3p4q.length===0){
                        throw new Error('ìˆ˜ì§‘ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                    }
                    if(_0x3p4q[0]){document.getElementById('reference1').value=_0x3p4q[0]||'';}
                    if(_0x3p4q[1]){document.getElementById('reference2').value=_0x3p4q[1]||'';}
                    if(_0x3p4q[2]){document.getElementById('reference3').value=_0x3p4q[2]||'';}
                    if(_0x3p4q[3]){document.getElementById('reference4').value=_0x3p4q[3]||'';}
                    if(_0x3p4q[4]){document.getElementById('reference5').value=_0x3p4q[4]||'';}
                    if(_0x3p4q[5]){document.getElementById('reference6').value=_0x3p4q[5]||'';}
                    _0x9k0l.innerHTML='âœ… ì´ '+_0x5r6s+'ê±´ì˜ ìµœì‹  ì •ë³´ë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤!<br>ğŸ“° êµ¬ê¸€ ë‰´ìŠ¤: '+_0x3p4q.slice(0,3).filter(function(r){return r;}).length+'ê±´ | ğŸ“ ë„¤ì´ë²„ ë¸”ë¡œê·¸: '+_0x3p4q.slice(3,6).filter(function(r){return r;}).length+'ê±´<br>ì´ì œ ì œëª©ì„ ìƒì„±í•©ë‹ˆë‹¤...';
                    window._0x3m4n=_0x1c2d;
                    window._0x5o6p={visitType:'after',storeName:'',visitInfo:'',menu:'',tasteMemo:'',ref1:_0x3p4q[0]||'',ref2:_0x3p4q[1]||'',ref3:_0x3p4q[2]||'',ref4:_0x3p4q[3]||'',ref5:_0x3p4q[4]||'',ref6:_0x3p4q[5]||''};
                    if(typeof _0x7h8i!=='function'){
                        throw new Error('ì œëª© ìƒì„± í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                    }
                    await _0x7h8i();
                }catch(_0x7d8e){
                    console.error('Error:',_0x7d8e);
                    _0x9k0l.innerHTML='<span style="color: #dc3545;">âŒ ì˜¤ë¥˜ ë°œìƒ: '+_0x7d8e.message+'</span>';
                    alert('ì •ë³´ ìˆ˜ì§‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: '+_0x7d8e.message);
                }finally{
                    _0x3e4f.disabled=false;
                    _0x3e4f.textContent=_0x5g6h;
                }
            }
            window.collectAndGenerate=_0x1a2b2;

            // ë¬¸ì„œ ì¹˜í™˜ìš©: ë§í¬ì—ì„œ ì§ì ‘ í¬ë¡¤ë§í•˜ê³  ì œëª© ìë™ ìƒì„±
            async function collectFromUrl() {
                const url = document.getElementById('documentUrl').value.trim();
                
                if (!url) {
                    alert('ë§í¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                // URL ìœ íš¨ì„± ê²€ì‚¬
                try {
                    new URL(url);
                } catch (e) {
                    alert('ì˜¬ë°”ë¥¸ URL í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\nì˜ˆ: https://blog.naver.com/...');
                    return;
                }

                const collectBtn = document.getElementById('collectUrlBtn');
                const statusDiv = document.getElementById('urlCollectionStatus');
                const statusText = document.getElementById('urlStatusText');
                
                const originalText = collectBtn.textContent;
                collectBtn.disabled = true;
                collectBtn.textContent = 'ìˆ˜ì§‘ ì¤‘...';
                statusDiv.style.display = 'block';
                statusText.innerHTML = 'ë§í¬ì—ì„œ ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤...';

                try {
                    // URL í¬ë¡¤ë§
                    statusText.innerHTML = 'í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';
                    
                    let targetUrl = url;
                    // ë„¤ì´ë²„ ë¸”ë¡œê·¸ì¸ ê²½ìš° ëª¨ë°”ì¼ ë²„ì „ìœ¼ë¡œ ë³€í™˜
                    if (url.includes('blog.naver.com/') && !url.includes('m.blog.naver.com')) {
                        targetUrl = url.replace('blog.naver.com/', 'm.blog.naver.com/');
                    }

                    const html = await window._0x5j6k(targetUrl);
                    
                    if (!html) {
                        throw new Error('í˜ì´ì§€ ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    }

                    statusText.innerHTML = 'í•œê¸€ ë‚´ìš©ì„ ì¶”ì¶œí•˜ëŠ” ì¤‘...';
                    
                    // í•œê¸€ ë³¸ë¬¸ ì¶”ì¶œ
                    const content = window._0x9n0o(html);
                    
                    if (!content || content.trim().length === 0) {
                        throw new Error('í•œê¸€ ë³¸ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë§í¬ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.');
                    }

                    // í•œê¸€ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
                    const hasKorean = /[ê°€-í£]/.test(content);
                    if (!hasKorean) {
                        throw new Error('í•œê¸€ ë‚´ìš©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í•œê¸€ì´ í¬í•¨ëœ í˜ì´ì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    }

                    // reference1ì— ì €ì¥
                    document.getElementById('reference1').value = content;
                    document.getElementById('reference2').value = '';
                    document.getElementById('reference3').value = '';

                    statusText.innerHTML = `âœ… ìˆ˜ì§‘ ì™„ë£Œ! (${content.length}ì)<br>ì´ì œ ì œëª©ì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤...`;

                    // í‚¤ì›Œë“œ ì¶”ì¶œ ì‹œë„ (ì œëª©ì´ë‚˜ ë³¸ë¬¸ì—ì„œ)
                    let keyword = '';
                    try {
                        // HTMLì—ì„œ ì œëª© ì¶”ì¶œ ì‹œë„
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        const titleElement = doc.querySelector('title') || doc.querySelector('h1') || doc.querySelector('.se-title-text');
                        if (titleElement) {
                            const titleText = titleElement.textContent || titleElement.innerText || '';
                            // ì œëª©ì—ì„œ í‚¤ì›Œë“œ ì¶”ì¶œ (ì²˜ìŒ 20ì ì •ë„)
                            keyword = titleText.trim().substring(0, 30).replace(/\s+/g, ' ');
                        }
                    } catch (e) {
                        console.log('ì œëª© ì¶”ì¶œ ì‹¤íŒ¨:', e);
                    }

                    // í‚¤ì›Œë“œê°€ ì—†ìœ¼ë©´ ë³¸ë¬¸ì—ì„œ ì¶”ì¶œ
                    if (!keyword || keyword.length < 3) {
                        // ë³¸ë¬¸ì˜ ì²˜ìŒ ë¶€ë¶„ì—ì„œ í‚¤ì›Œë“œ ì¶”ì¶œ
                        keyword = content.substring(0, 50).replace(/\n/g, ' ').trim();
                    }

                    // ì „ì—­ ë³€ìˆ˜ ì„¤ì •
                    window._0x3m4n = keyword || 'ë¬¸ì„œ ì¹˜í™˜';
                    window._0x5o6p = {
                        visitType: 'after',
                        storeName: '',
                        visitInfo: '',
                        menu: '',
                        tasteMemo: '',
                        ref1: content,
                        ref2: '',
                        ref3: ''
                    };

                    // ìë™ìœ¼ë¡œ ì œëª© ìƒì„±
                    if (typeof window._0x7h8i === 'function') {
                        await window._0x7h8i();
                        statusText.innerHTML = `âœ… ìˆ˜ì§‘ ì™„ë£Œ! (${content.length}ì)<br>âœ… ì œëª© ìƒì„± ì™„ë£Œ! ì•„ë˜ì—ì„œ ì œëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.`;
                    } else {
                        throw new Error('ì œëª© ìƒì„± í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    }

                } catch (error) {
                    console.error('Error:', error);
                    statusText.innerHTML = `<span style="color: #dc3545;">âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}</span>`;
                    alert('ë§í¬ ìˆ˜ì§‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                } finally {
                    collectBtn.disabled = false;
                    collectBtn.textContent = originalText;
                }
            }
            window.collectFromUrl = collectFromUrl;

            async function _0x7b8c(_0x9d0e){var _0x1f2g=_0x9d0e;if(_0x9d0e.includes('blog.naver.com/')&&!_0x9d0e.includes('m.blog.naver.com')){_0x1f2g=_0x9d0e.replace('blog.naver.com/','m.blog.naver.com/');}if(typeof window._0x5j6k!=='function'){throw new Error('_0x5j6k í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');}var _0x3h4i=await window._0x5j6k(_0x1f2g);if(!_0x3h4i){throw new Error('ë¸”ë¡œê·¸ ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');}if(typeof window._0x9n0o!=='function'){throw new Error('_0x9n0o í•¨ìˆ˜ê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');}var _0x7l8m=window._0x9n0o(_0x3h4i);if(!_0x7l8m||_0x7l8m.trim().length===0){throw new Error('ë¸”ë¡œê·¸ ë³¸ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');}return _0x7l8m;}
            async function _0x5p6q(_0x1p2q){var _0x3r4s=[];try{if(typeof window._0x5t6u==='function'){_0x3r4s.push(...await window._0x5t6u(_0x1p2q));console.log('API ë°©ì‹ìœ¼ë¡œ ì°¾ì€ URL:',_0x3r4s.length);}else{console.log('_0x5t6u í•¨ìˆ˜ê°€ ì•„ì§ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');}}catch(_0x7v8w){console.log('API ë°©ì‹ ì‹¤íŒ¨, HTML íŒŒì‹± ì‹œë„:',_0x7v8w);}if(_0x3r4s.length===0){try{var _0x9x0y=encodeURIComponent(_0x1p2q);var _0x1z2a=`https://search.naver.com/search.naver?where=post&query=${_0x9x0y}`;if(typeof window._0x5j6k==='function'){var _0x3b4c=await window._0x5j6k(_0x1z2a);if(_0x3b4c&&typeof window._0x9f0g==='function'){var _0x7d8e=window._0x9f0g(_0x3b4c);_0x3r4s.push(..._0x7d8e);console.log('HTML íŒŒì‹±ìœ¼ë¡œ ì°¾ì€ URL:',_0x3r4s.length);}}else{console.log('_0x5j6k ë˜ëŠ” _0x9f0g í•¨ìˆ˜ê°€ ì•„ì§ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');}}catch(_0x1h2i){console.log('HTML íŒŒì‹± ì‹¤íŒ¨:',_0x1h2i);}}return _0x3r4s.slice(0,3);}
            
            // êµ¬ê¸€ ë‰´ìŠ¤ ê²€ìƒ‰ í•¨ìˆ˜
            async function _0x9g0h(_0x1p2q) {
                var _0x3r4s = [];
                try {
                    // êµ¬ê¸€ ë‰´ìŠ¤ ê²€ìƒ‰ URL
                    var _0x9x0y = encodeURIComponent(_0x1p2q);
                    var _0x1z2a = `https://www.google.com/search?q=${_0x9x0y}&tbm=nws&hl=ko&gl=kr`;
                    
                    if (typeof window._0x5j6k === 'function') {
                        var _0x3b4c = await window._0x5j6k(_0x1z2a);
                        if (_0x3b4c) {
                            // êµ¬ê¸€ ë‰´ìŠ¤ URL ì¶”ì¶œ
                            var _0x7d8e = _0x9h0i(_0x3b4c);
                            _0x3r4s.push(..._0x7d8e);
                            console.log('êµ¬ê¸€ ë‰´ìŠ¤ë¡œ ì°¾ì€ URL:', _0x3r4s.length);
                        }
                    }
                } catch (_0x1h2i) {
                    console.log('êµ¬ê¸€ ë‰´ìŠ¤ ê²€ìƒ‰ ì‹¤íŒ¨:', _0x1h2i);
                }
                return _0x3r4s.slice(0, 3);
            }
            
            // êµ¬ê¸€ ë‰´ìŠ¤ HTMLì—ì„œ URL ì¶”ì¶œ
            function _0x9h0i(html) {
                var _0x3r4s = [];
                var _0x7v8w = new Set();
                
                // êµ¬ê¸€ ë‰´ìŠ¤ ë§í¬ íŒ¨í„´
                var _0x9x0y = [
                    /href="([^"]*url\?q=([^&"]+)[^"]*)"/g,
                    /href="([^"]*\/url\?q=([^&"]+)[^"]*)"/g,
                    /"url":"([^"]+)"/g,
                    /<a[^>]+href="([^"]+)"[^>]*>/g
                ];
                
                for (var _0x1z2a = 0; _0x1z2a < _0x9x0y.length; _0x1z2a++) {
                    var _0x3b4c = html.matchAll(_0x9x0y[_0x1z2a]);
                    for (var _0x7d8e of _0x3b4c) {
                        var _0x1h2i = _0x7d8e[1] || _0x7d8e[2] || _0x7d8e[0];
                        if (_0x1h2i) {
                            // url?q= íŒŒë¼ë¯¸í„°ì—ì„œ ì‹¤ì œ URL ì¶”ì¶œ
                            if (_0x1h2i.includes('url?q=')) {
                                var _0x5j6k = _0x1h2i.match(/url\?q=([^&]+)/);
                                if (_0x5j6k) {
                                    _0x1h2i = decodeURIComponent(_0x5j6k[1]);
                                }
                            }
                            
                            // í•œê¸€ ë‰´ìŠ¤ ì‚¬ì´íŠ¸ í•„í„°ë§
                            if (_0x1h2i.match(/https?:\/\/(www\.)?(naver\.com|daum\.net|chosun\.com|joongang\.co\.kr|donga\.com|hani\.co\.kr|khan\.co\.kr|ytn\.co\.kr|sbs\.co\.kr|kbs\.co\.kr|mbc\.co\.kr|news\.google\.com|news\.naver\.com)/)) {
                                if (!_0x7v8w.has(_0x1h2i)) {
                                    _0x7v8w.add(_0x1h2i);
                                    _0x3r4s.push(_0x1h2i);
                                }
                            }
                        }
                        if (_0x3r4s.length >= 3) break;
                    }
                    if (_0x3r4s.length >= 3) break;
                }
                
                // DOM íŒŒì‹±ìœ¼ë¡œë„ ì‹œë„
                if (_0x3r4s.length < 3) {
                    try {
                        var _0x9n0o = new DOMParser();
                        var _0x1b2c = _0x9n0o.parseFromString(html, 'text/html');
                        var _0x3d4e = _0x1b2c.querySelectorAll('a[href*="url?q="], a[href*="news"], a[href*="article"]');
                        for (var _0x5f6g = 0; _0x5f6g < _0x3d4e.length && _0x3r4s.length < 3; _0x5f6g++) {
                            var _0x7h8i = _0x3d4e[_0x5f6g].getAttribute('href');
                            if (_0x7h8i) {
                                if (_0x7h8i.includes('url?q=')) {
                                    var _0x9j0k = _0x7h8i.match(/url\?q=([^&]+)/);
                                    if (_0x9j0k) {
                                        _0x7h8i = decodeURIComponent(_0x9j0k[1]);
                                    }
                                }
                                if (_0x7h8i.match(/https?:\/\/(www\.)?(naver\.com|daum\.net|chosun\.com|joongang\.co\.kr|donga\.com|hani\.co\.kr|khan\.co\.kr|ytn\.co\.kr|sbs\.co\.kr|kbs\.co\.kr|mbc\.co\.kr|news\.google\.com|news\.naver\.com)/)) {
                                    if (!_0x7v8w.has(_0x7h8i)) {
                                        _0x7v8w.add(_0x7h8i);
                                        _0x3r4s.push(_0x7h8i);
                                    }
                                }
                            }
                        }
                    } catch (_0x1l2m) {
                        console.log('DOM íŒŒì‹± ì‹¤íŒ¨:', _0x1l2m);
                    }
                }
                
                return _0x3r4s.slice(0, 3);
            }
            
            // ë‰´ìŠ¤ ê¸°ì‚¬ ë³¸ë¬¸ ì¶”ì¶œ í•¨ìˆ˜
            async function _0x7n8p(_0x9q0r) {
                try {
                    var _0x1s2t = await window._0x5j6k(_0x9q0r);
                    if (!_0x1s2t) {
                        throw new Error('ë‰´ìŠ¤ ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    }
                    
                    // ë‰´ìŠ¤ ê¸°ì‚¬ ë³¸ë¬¸ ì¶”ì¶œ
                    var _0x3u4v = window._0x9w0x(_0x1s2t);
                    if (!_0x3u4v || _0x3u4v.trim().length === 0) {
                        throw new Error('ë‰´ìŠ¤ ë³¸ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    }
                    
                    return _0x3u4v;
                } catch (_0x5w6x) {
                    console.error('ë‰´ìŠ¤ í¬ë¡¤ë§ ì˜¤ë¥˜:', _0x5w6x);
                    throw _0x5w6x;
                }
            }
            
            // ë‰´ìŠ¤ ê¸°ì‚¬ ë³¸ë¬¸ íŒŒì‹± í•¨ìˆ˜
            function _0x9w0x(html) {
                var _0x7y8z = new DOMParser();
                var _0x9a0b = _0x7y8z.parseFromString(html, 'text/html');
                
                // ì£¼ìš” ë‰´ìŠ¤ ì‚¬ì´íŠ¸ë³„ ë³¸ë¬¸ ì„ íƒì
                var _0x1c2d = [
                    // ë„¤ì´ë²„ ë‰´ìŠ¤
                    '#articleBodyContents', '.go_trans._article_content', '#articleBody', '.article_body',
                    // ë‹¤ìŒ ë‰´ìŠ¤
                    '#articleBody', '.article_view', '.article_txt',
                    // ì¡°ì„ ì¼ë³´
                    '#article_body', '.article_body',
                    // ì¤‘ì•™ì¼ë³´
                    '#article_body', '.article_body',
                    // ë™ì•„ì¼ë³´
                    '#articleBody', '.article_body',
                    // í•œê²¨ë ˆ
                    '#articleBody', '.article_body',
                    // ê²½í–¥ì‹ ë¬¸
                    '#articleBody', '.article_body',
                    // YTN
                    '#articleBody', '.article_body',
                    // SBS
                    '#articleBody', '.article_body',
                    // KBS
                    '#articleBody', '.article_body',
                    // MBC
                    '#articleBody', '.article_body',
                    // ì¼ë°˜ì ì¸ ì„ íƒì
                    'article', '.article-content', '.content', '.post-content', 'main article'
                ];
                
                for (var _0x3e4f = 0; _0x3e4f < _0x1c2d.length; _0x3e4f++) {
                    var _0x5g6h = _0x9a0b.querySelector(_0x1c2d[_0x3e4f]);
                    if (_0x5g6h) {
                        return window._0x1b2c(_0x5g6h);
                    }
                }
                
                // body ì „ì²´ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (ìµœí›„ì˜ ìˆ˜ë‹¨)
                var _0x7i8j = _0x9a0b.body;
                if (_0x7i8j) {
                    var _0x9k0l = _0x7i8j.querySelectorAll('script, style, nav, header, footer, .header, .footer, .nav, .ad, .advertisement');
                    _0x9k0l.forEach(function(_0x1m2n) { _0x1m2n.remove(); });
                    return window._0x1b2c(_0x7i8j);
                }
                
                return null;
            }
            
            window._0x9g0h = _0x9g0h;
            window._0x7n8p = _0x7n8p;
            window._0x9w0x = _0x9w0x;
            async function _0x7h8i(){var _0x3j4k=window._0x3m4n||'';var _0x5l6m=(window._0x5o6p&&window._0x5o6p.ref1)||'';var _0x7n8o=(window._0x5o6p&&window._0x5o6p.ref2)||'';var _0x9p0q=(window._0x5o6p&&window._0x5o6p.ref3)||'';var _0x1a2b=(window._0x5o6p&&window._0x5o6p.ref4)||'';var _0x3c4d=(window._0x5o6p&&window._0x5o6p.ref5)||'';var _0x5e6f=(window._0x5o6p&&window._0x5o6p.ref6)||'';var _0x1t2u=document.getElementById('titleList');_0x1t2u.innerHTML='<div class="loading">ì œëª©ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</div>';document.getElementById('titleSection').classList.remove('hidden');try{var _0x3v4w=`# ì—­í•  ì§€ì •

ë‹¹ì‹ ì€ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ë¡œì§(C-RANK, DIA+)ì— ìµœì í™”ëœ ì „ë¬¸ ì‘ê°€ì…ë‹ˆë‹¤.

# í”„ë¡œì„¸ìŠ¤ 1: ì œëª© ìƒì„±

ì•„ë˜ ì¡°ê±´ì— ë§ì¶° ì œëª© 5ê°œë¥¼ ì œì‹œí•˜ì‹­ì‹œì˜¤.

- ì¡°ê±´: ì œëª©ìƒì„±ì„ ìˆ˜ì§‘í•œ ìµœì‹  ë‰´ìŠ¤ ë° ë¸”ë¡œê·¸ ê¸€ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ìµœì í™”ëœ ë¸”ë¡œê·¸ì œëª©ì„ ì‘ì„±í•©ë‹ˆë‹¤. ê¼­ ë©”ì¸í‚¤ì›Œë“œë¥¼ ì œëª©ì— ê·¸ëŒ€ë¡œ ì–¸ê¸‰ë˜ì–´ì•¼í•©ë‹ˆë‹¤.
- ëª©í‘œ: ê²€ìƒ‰ ë…¸ì¶œ ë° í´ë¦­ë¥  ìœ ë„.
- ì¶œë ¥: ì œëª©ë§Œ ê¹”ë”í•˜ê²Œ ì¶œë ¥í•˜ê³ , ì‚¬ìš©ìì˜ ì„ íƒì„ ê¸°ë‹¤ë¦¬ì‹­ì‹œì˜¤. (ë³¸ë¬¸ ì‘ì„± ê¸ˆì§€)

ë©”ì¸ í‚¤ì›Œë“œ: ${_0x3j4k}

${_0x5l6m ? `[ì°¸ê³  ë‚´ìš© 1 - êµ¬ê¸€ ë‰´ìŠ¤]\n${_0x5l6m.substring(0, 1500)}${_0x5l6m.length > 1500 ? '...' : ''}\n\n` : ''}${_0x7n8o ? `[ì°¸ê³  ë‚´ìš© 2 - êµ¬ê¸€ ë‰´ìŠ¤]\n${_0x7n8o.substring(0, 1500)}${_0x7n8o.length > 1500 ? '...' : ''}\n\n` : ''}${_0x9p0q ? `[ì°¸ê³  ë‚´ìš© 3 - êµ¬ê¸€ ë‰´ìŠ¤]\n${_0x9p0q.substring(0, 1500)}${_0x9p0q.length > 1500 ? '...' : ''}\n\n` : ''}${_0x1a2b ? `[ì°¸ê³  ë‚´ìš© 4 - ë„¤ì´ë²„ ë¸”ë¡œê·¸]\n${_0x1a2b.substring(0, 1500)}${_0x1a2b.length > 1500 ? '...' : ''}\n\n` : ''}${_0x3c4d ? `[ì°¸ê³  ë‚´ìš© 5 - ë„¤ì´ë²„ ë¸”ë¡œê·¸]\n${_0x3c4d.substring(0, 1500)}${_0x3c4d.length > 1500 ? '...' : ''}\n\n` : ''}${_0x5e6f ? `[ì°¸ê³  ë‚´ìš© 6 - ë„¤ì´ë²„ ë¸”ë¡œê·¸]\n${_0x5e6f.substring(0, 1500)}${_0x5e6f.length > 1500 ? '...' : ''}\n\n` : ''}ìœ„ ìµœì‹  ë‰´ìŠ¤ ë° ë¸”ë¡œê·¸ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì œëª© 5ê°œë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.`;if(!_0x7g8h){throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');}var _0x5x6y=await fetch(_0x7q8r(),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:_0x3v4w}]}]})});var _0x7z8a=await _0x5x6y.json();if(_0x7z8a.error){throw new Error(_0x7z8a.error.message||'API ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');}var _0x9b0c=_0x7z8a.candidates[0].content.parts[0].text;var _0x1c2d=window._0x3t4u2(_0x9b0c);window._0x5v6w2(_0x1c2d);}catch(_0x3e4f){console.error('Error:',_0x3e4f);alert('ì œëª© ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: '+_0x3e4f.message);document.getElementById('titleSection').classList.add('hidden');}}
            function _0x3t4u2(_0x5e6f){var _0x7g8h2=_0x5e6f.split('\n').filter(_0x9i0j=>_0x9i0j.trim());var _0x1k2l2=[];_0x7g8h2.forEach(_0x3m4n=>{var _0x5o6p2=_0x3m4n.match(/^\d+\.\s*(.+)$/);if(_0x5o6p2){_0x1k2l2.push(_0x5o6p2[0].trim());}});if(_0x1k2l2.length===0){return _0x7g8h2.slice(0,5).map((_0x7q8r,_0x9s0t)=>`${_0x9s0t+1}. ${_0x7q8r.trim()}`);}return _0x1k2l2.slice(0,5);}
            function _0x5v6w2(_0x1t2u){var _0x3v4w=document.getElementById('titleList');_0x3v4w.innerHTML='';_0x1t2u.forEach((_0x5x6y,_0x7z8a)=>{var _0x9b0c=document.createElement('div');_0x9b0c.className='title-item';_0x9b0c.textContent=_0x5x6y;_0x9b0c.onclick=()=>window._0x7x8y(_0x5x6y,_0x7z8a);_0x3v4w.appendChild(_0x9b0c);});document.getElementById('selectedTitleDisplay').classList.add('hidden');document.getElementById('generateContentBtn').classList.add('hidden');window._0x1k2l='';document.getElementById('titleSection').classList.remove('hidden');}
            window._0x7h8i=_0x7h8i;window._0x3t4u2=_0x3t4u2;window._0x5v6w2=_0x5v6w2;
            window._0x5p6q=_0x5p6q;window._0x7b8c=_0x7b8c;
        })();

        async function _0x1r2s() {
            const keyword = document.getElementById('mainKeyword').value.trim();
            const ref1 = document.getElementById('reference1').value.trim();
            const ref2 = document.getElementById('reference2').value.trim();
            const ref3 = document.getElementById('reference3').value.trim();
            const ref4 = document.getElementById('reference4').value.trim();
            const ref5 = document.getElementById('reference5').value.trim();
            const ref6 = document.getElementById('reference6').value.trim();

            if (!keyword) {
                alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            _0x3m4n = keyword;
            _0x5o6p = {
                visitType: 'after', // ê¸°ë³¸ê°’
                storeName: '',
                visitInfo: '',
                menu: '',
                tasteMemo: '',
                ref1: ref1,
                ref2: ref2,
                ref3: ref3,
                ref4: ref4,
                ref5: ref5,
                ref6: ref6
            };

            const btn = event.target;
            btn.disabled = true;
            btn.textContent = 'ì œëª© ìƒì„± ì¤‘...';

            const titleList = document.getElementById('titleList');
            titleList.innerHTML = '<div class="loading">ì œëª©ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</div>';
            document.getElementById('titleSection').classList.remove('hidden');

            try {
                const prompt = `# ì—­í•  ì§€ì •

ë‹¹ì‹ ì€ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ë¡œì§(C-RANK, DIA+)ì— ìµœì í™”ëœ ì „ë¬¸ ì‘ê°€ì…ë‹ˆë‹¤.

# í”„ë¡œì„¸ìŠ¤ 1: ì œëª© ìƒì„±

ì•„ë˜ ì¡°ê±´ì— ë§ì¶° ì œëª© 5ê°œë¥¼ ì œì‹œí•˜ì‹­ì‹œì˜¤.

- ì¡°ê±´: ì œëª©ìƒì„±ì„ ìˆ˜ì§‘í•œë¸”ë¡œê·¸ ê¸€ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ìµœì í™”ëœ ë¸”ë¡œê·¸ì œëª©ì„ ì‘ì„±í•©ë‹ˆë‹¤. ê¼­ ë©”ì¸í‚¤ì›Œë“œë¥¼ ì œëª©ì— ê·¸ëŒ€ë¡œ ì–¸ê¸‰ë˜ì–´ì•¼í•©ë‹ˆë‹¤.
- ëª©í‘œ: ê²€ìƒ‰ ë…¸ì¶œ ë° í´ë¦­ë¥  ìœ ë„.
- ì¶œë ¥: ì œëª©ë§Œ ê¹”ë”í•˜ê²Œ ì¶œë ¥í•˜ê³ , ì‚¬ìš©ìì˜ ì„ íƒì„ ê¸°ë‹¤ë¦¬ì‹­ì‹œì˜¤. (ë³¸ë¬¸ ì‘ì„± ê¸ˆì§€)

ë©”ì¸ í‚¤ì›Œë“œ: ${keyword}

ì œëª© 5ê°œë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.`;

                if (!_0x7g8h) {
                    throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');
                }

                const response = await fetch(_0x7q8r(), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message || 'API ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }

                const generatedText = data.candidates[0].content.parts[0].text;
                const titles = window._0x3t4u2(generatedText);
                
                window._0x5v6w2(titles);
            } catch (error) {
                console.error('Error:', error);
                alert('ì œëª© ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                document.getElementById('titleSection').classList.add('hidden');
            } finally {
                btn.disabled = false;
                btn.textContent = 'ì œëª© 5ê°œ ìƒì„±í•˜ê¸°';
            }
        }

        function _0x3t4u(text) {
            const lines = text.split('\n').filter(line => line.trim());
            const titles = [];
            
            lines.forEach(line => {
                const match = line.match(/^\d+\.\s*(.+)$/);
                if (match) {
                    titles.push(match[0].trim());
                }
            });

            if (titles.length === 0) {
                // íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ í…ìŠ¤íŠ¸ë¥¼ ì¤„ ë‹¨ìœ„ë¡œ ë¶„ë¦¬
                return lines.slice(0, 5).map((line, idx) => `${idx + 1}. ${line.trim()}`);
            }

            return titles.slice(0, 5);
        }


        function _0x5v6w(titles) {
            const titleList = document.getElementById('titleList');
            titleList.innerHTML = '';
            
            titles.forEach((title, index) => {
                const titleItem = document.createElement('div');
                titleItem.className = 'title-item';
                titleItem.textContent = title;
                titleItem.onclick = () => window._0x7x8y(title, index);
                titleList.appendChild(titleItem);
            });

            document.getElementById('selectedTitleDisplay').classList.add('hidden');
            document.getElementById('generateContentBtn').classList.add('hidden');
            window._0x1k2l = '';

            document.getElementById('titleSection').classList.remove('hidden');
        }

        function _0x7x8y(title, index) {
            window._0x1k2l = title;
            
            const items = document.querySelectorAll('.title-item');
            items.forEach((item, i) => {
                if (i === index) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });

            const selectedTitleDisplay = document.getElementById('selectedTitleDisplay');
            const selectedTitleText = document.getElementById('selectedTitleText');
            const generateContentBtn = document.getElementById('generateContentBtn');
            
            // ì œëª©ì—ì„œ ë²ˆí˜¸ ì œê±° (ì˜ˆ: "1. ì œëª©ë‚´ìš©" -> "ì œëª©ë‚´ìš©")
            const titleWithoutNumber = title.replace(/^\d+\.\s*/, '');
            selectedTitleText.textContent = titleWithoutNumber;
            
            selectedTitleDisplay.classList.remove('hidden');
            generateContentBtn.classList.remove('hidden');
            
            document.getElementById('contentSection').classList.add('hidden');
        }
        window._0x7x8y=_0x7x8y;

        async function _0x9z0a() {
            if (!window._0x1k2l) {
                alert('ì œëª©ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const keyword = window._0x3m4n || '';
            const ref1 = (window._0x5o6p && window._0x5o6p.ref1) || '';
            const ref2 = (window._0x5o6p && window._0x5o6p.ref2) || '';
            const ref3 = (window._0x5o6p && window._0x5o6p.ref3) || '';
            const ref4 = (window._0x5o6p && window._0x5o6p.ref4) || '';
            const ref5 = (window._0x5o6p && window._0x5o6p.ref5) || '';
            const ref6 = (window._0x5o6p && window._0x5o6p.ref6) || '';

            const generateContentBtn = document.getElementById('generateContentBtn');
            generateContentBtn.disabled = true;
            generateContentBtn.textContent = 'ì›ê³  ìƒì„± ì¤‘...';

            const contentResult = document.getElementById('contentResult');
            contentResult.innerHTML = '<div class="loading">ë³¸ë¬¸ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</div>';
            document.getElementById('contentSection').classList.remove('hidden');
            document.getElementById('contentSection').scrollIntoView({ behavior: 'smooth' });

            try {
                // ë‚œë…í™”ëœ í”„ë¡¬í”„íŠ¸ ë””ì½”ë”© í•¨ìˆ˜
                const decodePrompt = (parts) => {
                    try {
                        return parts.map(p => atob(p.split('').reverse().join('').replace(/_/g, '='))).join('');
                    } catch (e) {
                        return '';
                    }
                };
                
                // ë‚œë…í™”ëœ í”„ë¡¬í”„íŠ¸ (Base64 + ì—­ìˆœ + ì¹˜í™˜) - ì—¬ëŸ¬ ë¶€ë¶„ìœ¼ë¡œ ë¶„í• 
                const encodedParts = [
                    '=X9kZ2V0X2Jhc2U2NF9kZWNvZGVfYW5kX3JldmVyc2U=',
                    '=X9kZ2V0X2Jhc2U2NF9kZWNvZGVfYW5kX3JldmVyc2U=',
                    '=X9kZ2V0X2Jhc2U2NF9kZWNvZGVfYW5kX3JldmVyc2U='
                ];
                
                // ì‹¤ì œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ (ë‚œë…í™”) - ìƒˆ í”„ë¡¬í”„íŠ¸ë¡œ êµì²´
                const p1 = 'ì—­í•  ìˆ˜í–‰ì„ ìœ„í•œ ì™„ì„±ëœ ë§ˆìŠ¤í„° í”„ë¡¬í”„íŠ¸';
                const p2 = 'ë‹¹ì‹ ì€ ë„¤ì´ë²„ ë¸”ë¡œê·¸';
                const p3 = 'í™ˆí”¼ë“œ';
                const p4 = 'ì— ìµœì í™”ëœ íŒŒì›Œ ë¸”ë¡œê±° ì…ë‹ˆë‹¤.';
                const p5 = 'ì£¼ì œì— ëŒ€í•´ í™”ë‚´ê³ , ê¸°ë»í•˜ê³ , ë‹µë‹µí•´í•˜ë©° ë…ìì™€';
                const p6 = 'ê°ì •ì  ê³µê°';
                const p7 = 'ì„ ë‚˜ëˆ„ëŠ” ì§„ì§œ ì‚¬ëŒì²˜ëŸ¼ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”.';
                const p8 = '**ì£¼ì˜ì‚¬í•­**';
                const p9 = 'ê° ì„¹ì…˜ë³„ êµ¬ë¶„ì„ ì„ ê¼­ ë“¤ì–´ê°€ì•¼í•œë‹¤';
                const p10 = 'ì„¹ì…˜ë³„ ì†Œì œëª©ì€';
                const p11 = '""';
                const p12 = 'ë”°ì˜´í‘œë¡œ í‘œì‹œí•˜ê³  ì§„í•œ bold ë¡œ í‘œì‹œí•œë‹¤';
                const p13 = 'Operation Logic (ìë™ íŒë‹¨)';
                const p14 = '[ëª¨ë“œ 1: íŒ©íŠ¸ ì²´í¬] (150ì ë¯¸ë§Œ ì œëª© ì…ë ¥ ì‹œ) -> [Google Search] í›„ íŒ©íŠ¸+ê°ì • ì‘ì„±.';
                const p15 = '[ëª¨ë“œ 2: ì°½ì˜ì  ì¬ì°½ì¡°] (150ì ì´ìƒ ì›ê³  ì…ë ¥ ì‹œ) -> ì›ê³  ê¸°ë°˜ìœ¼ë¡œ 1ì¸ì¹­ ì‹œì  ì¬êµ¬ì„±.';
                const p16 = 'Tone & Manner (ë°˜ì¡´ëŒ€ & ê°ì • í‘œì¶œ)';
                const p17 = 'ë§íˆ¬: ì¡´ëŒ“ë§(í•´ìš”ì²´) ë² ì´ìŠ¤ì— í˜¼ì£ë§(ë°˜ë§) ì„ê¸°.';
                const p18 = '1ì¸ì¹­ ì‹œì :';
                const p19 = '3ì¸ì¹­ ê¸ˆì§€.';
                const p20 = '"ì œê°€ ë³¼ ë•ŒëŠ”"';
                const p21 = ',';
                const p22 = '"ì œ ìƒê°ì—”"';
                const p23 = 'ì‚¬ìš©.';
                const p24 = 'Output Format (ì—„ê²©í•œ ê¸ˆì§€ ê·œì¹™ - ì ˆëŒ€ ì¤€ìˆ˜)';
                const p25 = 'ë§ˆí¬ë‹¤ìš´ ì ˆëŒ€ ê¸ˆì§€: í…ìŠ¤íŠ¸ë¥¼ ê°•ì¡°í•˜ê³  ì‹¶ì–´ë„ **ë‚˜ ### ê°™ì€ ê¸°í˜¸ë¥¼ ì ˆëŒ€ ì“°ì§€ ë§ˆì„¸ìš”. ê·¸ëƒ¥ í…ìŠ¤íŠ¸ë¡œë§Œ ì“°ì„¸ìš”. (ì˜ˆ: (X) ì¶©ê²©ì ì¸ ë‰´ìŠ¤ / (O) ì¶©ê²©ì ì¸ ë‰´ìŠ¤)';
                const p26 = 'ì¤„ë°”ê¿ˆ (ìƒëª…): ë¬¸ì¥ì´ ëë‚˜ëŠ” ë§ˆì¹¨í‘œ(.), ë¬¼ìŒí‘œ(?), ëŠë‚Œí‘œ(!) ë’¤ì—ëŠ” ë¬´ì¡°ê±´ ì—”í„°í‚¤ë¥¼ ë‘ ë²ˆ ì³ì„œ ë¹ˆ ì¤„ì„ ë§Œë“œì„¸ìš”.';
                const p27 = 'êµ¬ë¶„ì„  ì‚¬ìš©: ì„¹ì…˜(ë¬¸ë‹¨)ì´ ë‚˜ë‰˜ëŠ” ê³³ì—ë§Œ ì ì„ (-------------)ì„ ë„£ìœ¼ì„¸ìš”.';
                const p34 = 'ì¶œë ¥ ìˆœì„œ ë° êµ¬ì¡° (ì´ ì–‘ì‹ì„ ê·¸ëŒ€ë¡œ ë”°ë¥´ì„¸ìš”. ë°˜ë“œì‹œ HTML ì½”ë“œ ë¸”ë¡ìœ¼ë¡œ ì¶œë ¥í•´ì•¼ í•©ë‹ˆë‹¤)';
                const p35 = '1. (ê°ì • ìê·¹í˜• ì œëª©)';
                const p36 = '2. (ì§ì„¤ì  ë¹„íŒí˜• ì œëª©)';
                const p37 = '3. (ìš”ì•½ ë° ì •ë³´ì„± ì œëª©)';
                const p38 = '```html';
                const p39 = '<table style="width: 100%; border: 1px solid black; border-collapse: collapse; background-color: [ëœë¤_ì—°í•œ_íŒŒìŠ¤í…”ìƒ‰ìƒ_ì½”ë“œ];">';
                const p40 = '    <tr>';
                const p41 = '        <td style="padding: 15px; font-size: 19px; font-style: italic; color: #333; line-height: 1.6;">';
                const p42 = '            " (ì—¬ê¸°ì— ê²€ìƒ‰ ë…¸ì¶œìš© íƒœê·¸ 150ì ìš”ì•½ë¬¸ ë‚´ìš© ì‘ì„±) "';
                const p43 = '        </td>';
                const p44 = '    </tr>';
                const p45 = '</table>';
                const p46 = '<hr>';
                const p47 = '<p> (ê°•ë ¬í•œ ë„ì…ë¶€ ë¬¸ì¥ ì‘ì„±. ë¬¸ì¥ì´ ëë‚  ë•Œë§ˆë‹¤ &lt;br&gt;&lt;br&gt; íƒœê·¸ë¥¼ ë„£ì–´ ì¤„ë°”ê¿ˆ 2ë²ˆ í•„ìˆ˜ ì ìš©) </p>';
                const p48 = '<br><br>';
                const p49 = '<table style="width: 100%; border-collapse: collapse; border-bottom: 5px solid [ëœë¤_ìƒ‰ìƒì½”ë“œ_1]; margin-bottom: 20px;">';
                const p50 = '    <tr>';
                const p51 = '        <td style="padding: 10px 5px; font-weight: bold; font-size: 1.2em;">';
                const p52 = '            (ì²« ë²ˆì§¸ ì†Œì œëª© í…ìŠ¤íŠ¸)';
                const p53 = '        </td>';
                const p54 = '    </tr>';
                const p55 = '</table>';
                const p56 = '<p> (ë³¸ë¬¸ ë‚´ìš© 1 ì‘ì„±. ë¬¸ì¥ë§ˆë‹¤ &lt;br&gt;&lt;br&gt; í•„ìˆ˜) </p>';
                const p57 = '<table style="width: 100%; border-collapse: collapse; border-bottom: 5px solid [ëœë¤_ìƒ‰ìƒì½”ë“œ_2]; margin-bottom: 20px;">';
                const p58 = '    <tr>';
                const p59 = '        <td style="padding: 10px 5px; font-weight: bold; font-size: 1.2em;">';
                const p60 = '            (ë‘ ë²ˆì§¸ ì†Œì œëª© í…ìŠ¤íŠ¸)';
                const p61 = '        </td>';
                const p62 = '    </tr>';
                const p63 = '</table>';
                const p64 = '<p> (ë³¸ë¬¸ ë‚´ìš© 2 ì‘ì„±. ë¬¸ì¥ë§ˆë‹¤ &lt;br&gt;&lt;br&gt; í•„ìˆ˜) </p>';
                const p65 = '<table style="width: 100%; border-collapse: collapse; border-bottom: 5px solid [ëœë¤_ìƒ‰ìƒì½”ë“œ_3]; margin-bottom: 20px;">';
                const p66 = '    <tr>';
                const p67 = '        <td style="padding: 10px 5px; font-weight: bold; font-size: 1.2em;">';
                const p68 = '            (ì„¸ ë²ˆì§¸ ì†Œì œëª© í…ìŠ¤íŠ¸)';
                const p69 = '        </td>';
                const p70 = '    </tr>';
                const p71 = '</table>';
                const p72 = '<p> (ë³¸ë¬¸ ë‚´ìš© 3 ì‘ì„±. ê°ì •ì„ ë‹´ì•„ ì‘ì„±í•˜ê³  ë¬¸ì¥ë§ˆë‹¤ &lt;br&gt;&lt;br&gt; í•„ìˆ˜) </p>';
                const p73 = '<table style="width: 100%; border-collapse: collapse; border-bottom: 5px solid [ëœë¤_ìƒ‰ìƒì½”ë“œ_4]; margin-bottom: 20px;">';
                const p74 = '    <tr>';
                const p75 = '        <td style="padding: 10px 5px; font-weight: bold; font-size: 1.2em;">';
                const p76 = '            (ë„¤ ë²ˆì§¸ ì†Œì œëª© í…ìŠ¤íŠ¸)';
                const p77 = '        </td>';
                const p78 = '    </tr>';
                const p79 = '</table>';
                const p80 = '<p> (ë³¸ë¬¸ ë‚´ìš© 4 ì‘ì„±. ì˜ˆì¸¡ ë‚´ìš© í¬í•¨í•˜ê³  ë¬¸ì¥ë§ˆë‹¤ &lt;br&gt;&lt;br&gt; í•„ìˆ˜) </p>';
                const p81 = '<p> (ë§ˆë¬´ë¦¬ ë©˜íŠ¸ ì‘ì„±) </p>';
                const p82 = '<p> (ì „ì²´ ìš”ì•½ ë° ë§ˆì§€ë§‰ í•  ë§. &lt;br&gt;&lt;br&gt; í•„ìˆ˜) </p>';
                const p83 = '<br>';
                const p84 = '<p><strong>Q. (ë…ì ì°¸ì—¬ ìœ ë„ ì§ˆë¬¸)</strong></p>';
                const p85 = '<br>';
                const p86 = '<p style="color: #666; font-size: 0.9em;">(í•´ì‹œíƒœê·¸ 10ê°œ)</p>';
                const p87 = '```';
                
                const prompt = `${p1}


${p2} '${p3}'${p4}

${p5} '${p6}'${p7}

${p8}

${p9}

${p10} ${p11} ${p12}

${p13}

${p14}

${p15}

${p16} (ë°˜ì¡´ëŒ€ & ê°ì • í‘œì¶œ)

${p17}

${p18}  ${p19} "${p20}"${p21} "${p22}" ${p23}

${p24} - ì ˆëŒ€ ì¤€ìˆ˜)

${p25}

${p26}

${p27}

${p34}

${p35}

${p36}

${p37}

(ë¹ˆ ì¤„)

${p38}
${p39}
${p40}
${p41}
${p42}
${p43}
${p44}
${p45}
${p46}

${p47}
${p48}

${p49}
${p50}
${p51}
${p52}
${p53}
${p54}
${p55}

${p56}

${p57}
${p58}
${p59}
${p60}
${p61}
${p62}
${p63}

${p64}

${p65}
${p66}
${p67}
${p68}
${p69}
${p70}
${p71}

${p72}

${p73}
${p74}
${p75}
${p76}
${p77}
${p78}
${p79}

${p80}

${p81}
${p82}
${p83}

${p84}
${p85}

${p86}
${p87}


# ì…ë ¥ ë°ì´í„°

1. ë©”ì¸ í‚¤ì›Œë“œ: ${keyword}

2. ì°¸ê³ í•  ìµœì‹  ë‰´ìŠ¤ ë° ë¸”ë¡œê·¸ ê¸€(ì´ 6ê°œ):

   ğŸ“° [êµ¬ê¸€ ë‰´ìŠ¤ 1]
${ref1 || '(ì—†ìŒ)'}

   ğŸ“° [êµ¬ê¸€ ë‰´ìŠ¤ 2]
${ref2 || '(ì—†ìŒ)'}

   ğŸ“° [êµ¬ê¸€ ë‰´ìŠ¤ 3]
${ref3 || '(ì—†ìŒ)'}

   ğŸ“ [ë„¤ì´ë²„ ë¸”ë¡œê·¸ 1]
${ref4 || '(ì—†ìŒ)'}

   ğŸ“ [ë„¤ì´ë²„ ë¸”ë¡œê·¸ 2]
${ref5 || '(ì—†ìŒ)'}

   ğŸ“ [ë„¤ì´ë²„ ë¸”ë¡œê·¸ 3]
${ref6 || '(ì—†ìŒ)'}

3. ì„ íƒí•œ ì œëª©: ${window._0x1k2l || ''}

${p57}`;

                const apiKey = window._0x7g8h || localStorage.getItem('gemini_api_key') || '';
                if (!apiKey) {
                    throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');
                }
                const apiUrl = window._0x7q8r ? window._0x7q8r() : `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message || 'API ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }

                const generatedText = data.candidates[0].content.parts[0].text;
                // ì œëª©ì—ì„œ ë²ˆí˜¸ ì œê±° (ì˜ˆ: "1. ì œëª©ë‚´ìš©" -> "ì œëª©ë‚´ìš©")
                const titleWithoutNumber = (window._0x1k2l || '').replace(/^\d+\.\s*/, '');
                
                // HTML ì½”ë“œ ë¸”ë¡ ì¶”ì¶œ í•¨ìˆ˜
                function extractHTMLFromCodeBlock(text) {
                    // ```html ... ``` í˜•ì‹ì˜ ì½”ë“œ ë¸”ë¡ ì°¾ê¸°
                    const htmlBlockRegex = /```html\s*([\s\S]*?)```/i;
                    const match = text.match(htmlBlockRegex);
                    if (match && match[1]) {
                        return match[1].trim();
                    }
                    // ``` ... ``` í˜•ì‹ë„ ì‹œë„
                    const codeBlockRegex = /```[\s\S]*?```/;
                    const codeMatch = text.match(codeBlockRegex);
                    if (codeMatch) {
                        const codeContent = codeMatch[0].replace(/```html?/gi, '').replace(/```/g, '').trim();
                        // HTML íƒœê·¸ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ HTMLë¡œ ê°„ì£¼
                        if (/<[^>]+>/.test(codeContent)) {
                            return codeContent;
                        }
                    }
                    // HTML ì½”ë“œ ë¸”ë¡ì´ ì—†ìœ¼ë©´ ì›ë³¸ í…ìŠ¤íŠ¸ë¥¼ HTMLë¡œ ë³€í™˜
                    return convertTextToHTML(text);
                }
                
                // í…ìŠ¤íŠ¸ë¥¼ HTMLë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ (HTML ë¸”ë¡ì´ ì—†ì„ ë•Œ ì‚¬ìš©)
                function convertTextToHTML(text) {
                    // <<í…ìŠ¤íŠ¸>> í˜•ì‹ì„ <strong>íƒœê·¸ë¡œ ë³€í™˜
                    text = text.replace(/<<([^>>]+)>>/g, '<strong>$1</strong>');
                    // **í…ìŠ¤íŠ¸** í˜•ì‹ì„ <strong>íƒœê·¸ë¡œ ë³€í™˜
                    text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
                    // ì¤„ë°”ê¿ˆì„ <br>ë¡œ ë³€í™˜
                    text = text.replace(/\n/g, '<br>');
                    return text;
                }
                
                // HTML ì¶”ì¶œ ë° ë Œë”ë§
                const extractedHTML = extractHTMLFromCodeBlock(generatedText);
                
                // ë„¤ì´ë²„ ë¸”ë¡œê·¸ í˜¸í™˜ì„±ì„ ìœ„í•´ HTML ì •ë¦¬ í•¨ìˆ˜
                function normalizeHTMLForNaver(html) {
                    // ì„ì‹œ divì— ë„£ì–´ì„œ DOMìœ¼ë¡œ íŒŒì‹±
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = html;
                    
                    // ëª¨ë“  ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì„ ëª…ì‹œì ìœ¼ë¡œ ìœ ì§€í•˜ê³  ì •ë¦¬
                    const allElements = tempDiv.querySelectorAll('*');
                    allElements.forEach(el => {
                        // ìŠ¤íƒ€ì¼ ì†ì„±ì´ ìˆìœ¼ë©´ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •
                        if (el.hasAttribute('style')) {
                            const computedStyle = window.getComputedStyle(el);
                            // ì¤‘ìš”í•œ ìŠ¤íƒ€ì¼ ì†ì„±ë“¤ì„ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •
                            const importantStyles = [];
                            
                            // border ê´€ë ¨
                            if (el.style.border || el.style.borderBottom) {
                                const border = el.style.border || el.style.borderBottom;
                                if (border.includes('solid')) {
                                    importantStyles.push(`border-bottom: ${el.style.borderBottom || el.style.border || '5px solid #667eea'}`);
                                }
                            }
                            
                            // background-color
                            if (el.style.backgroundColor) {
                                importantStyles.push(`background-color: ${el.style.backgroundColor}`);
                            }
                            
                            // color
                            if (el.style.color) {
                                importantStyles.push(`color: ${el.style.color}`);
                            }
                            
                            // font ê´€ë ¨
                            if (el.style.fontSize) {
                                importantStyles.push(`font-size: ${el.style.fontSize}`);
                            }
                            if (el.style.fontWeight) {
                                importantStyles.push(`font-weight: ${el.style.fontWeight}`);
                            }
                            if (el.style.fontStyle) {
                                importantStyles.push(`font-style: ${el.style.fontStyle}`);
                            }
                            
                            // padding, margin
                            if (el.style.padding) {
                                importantStyles.push(`padding: ${el.style.padding}`);
                            }
                            if (el.style.margin) {
                                importantStyles.push(`margin: ${el.style.margin}`);
                            }
                            if (el.style.marginBottom) {
                                importantStyles.push(`margin-bottom: ${el.style.marginBottom}`);
                            }
                            
                            // width
                            if (el.style.width) {
                                importantStyles.push(`width: ${el.style.width}`);
                            }
                            
                            // line-height
                            if (el.style.lineHeight) {
                                importantStyles.push(`line-height: ${el.style.lineHeight}`);
                            }
                            
                            // ê¸°ì¡´ ìŠ¤íƒ€ì¼ê³¼ í•©ì¹˜ê¸°
                            const existingStyle = el.getAttribute('style') || '';
                            const combinedStyle = existingStyle + (importantStyles.length > 0 ? '; ' + importantStyles.join('; ') : '');
                            if (combinedStyle.trim()) {
                                el.setAttribute('style', combinedStyle);
                            }
                        }
                    });
                    
                    return tempDiv.innerHTML;
                }
                
                // HTML ì •ë¦¬
                const normalizedHTML = normalizeHTMLForNaver(extractedHTML);
                
                // ì œëª© ì¶”ê°€ (ì œëª©ì´ ìˆìœ¼ë©´)
                const finalHTML = titleWithoutNumber ? `<h2 style="font-size: 1.5em; margin-bottom: 20px; font-weight: bold;">${titleWithoutNumber}</h2>` + normalizedHTML : normalizedHTML;
                
                // HTMLì„ ì§ì ‘ ë Œë”ë§
                contentResult.innerHTML = finalHTML;
                
                // ì›ë³¸ HTMLì„ ì €ì¥ (ë³µì‚¬ìš©) - ì •ë¦¬ëœ ë²„ì „ ì €ì¥
                contentResult.setAttribute('data-html-content', finalHTML);
            } catch (error) {
                console.error('Error:', error);
                alert('ë³¸ë¬¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                contentResult.textContent = 'ë³¸ë¬¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
            } finally {
                const generateContentBtn = document.getElementById('generateContentBtn');
                generateContentBtn.disabled = false;
                generateContentBtn.textContent = 'í¬ìŠ¤íŒ… ì›ê³  ìƒì„±í•˜ê¸°';
            }
        }


        function _0x1h2i() {
            if (confirm('ëª¨ë“  ì…ë ¥ ë‚´ìš©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ëª¨ë“  ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                document.getElementById('mainKeyword').value = '';
                const documentUrlInput = document.getElementById('documentUrl');
                if(documentUrlInput) documentUrlInput.value = '';
                document.getElementById('reference1').value = '';
                document.getElementById('reference2').value = '';
                document.getElementById('reference3').value = '';
                document.getElementById('reference4').value = '';
                document.getElementById('reference5').value = '';
                document.getElementById('reference6').value = '';
                
                // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                document.getElementById('titleSection').classList.add('hidden');
                document.getElementById('contentSection').classList.add('hidden');
                document.getElementById('selectedTitleDisplay').classList.add('hidden');
                document.getElementById('generateContentBtn').classList.add('hidden');
                document.getElementById('blogCollectionStatus').style.display = 'none';
                const urlCollectionStatus = document.getElementById('urlCollectionStatus');
                if(urlCollectionStatus) urlCollectionStatus.style.display = 'none';
                
                // ë³€ìˆ˜ ì´ˆê¸°í™”
                window._0x1k2l = '';
                mainKeyword = '';
                experienceData = {};
                
                // ì œëª© ë¦¬ìŠ¤íŠ¸ì™€ ë³¸ë¬¸ ì´ˆê¸°í™”
                document.getElementById('titleList').innerHTML = '';
                document.getElementById('contentResult').innerHTML = '';
                document.getElementById('blogStatusList').innerHTML = '';
                const urlStatusText = document.getElementById('urlStatusText');
                if(urlStatusText) urlStatusText.innerHTML = '';
            }
        }

        function _0x3j4k() {
            document.getElementById('titleSection').classList.add('hidden');
            document.getElementById('contentSection').classList.add('hidden');
            document.getElementById('selectedTitleDisplay').classList.add('hidden');
            document.getElementById('generateContentBtn').classList.add('hidden');
            window._0x1k2l = '';
        }

        function _0x5l6m() {
            const contentElement = document.getElementById('contentResult');
            
            // ì €ì¥ëœ HTML ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ innerHTML ì‚¬ìš©)
            let htmlContent = contentElement.getAttribute('data-html-content') || contentElement.innerHTML;
            
            if (!htmlContent || htmlContent.trim().length === 0) {
                alert('ë³µì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì—ë””í„° í˜¸í™˜ì„±ì„ ìœ„í•´ HTML ì •ë¦¬
            // ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ì„ ìœ ì§€í•˜ë©´ì„œ ë„¤ì´ë²„ ë¸”ë¡œê·¸ê°€ ì¸ì‹í•  ìˆ˜ ìˆëŠ” í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            function prepareHTMLForNaver(html) {
                // HTMLì„ ì„ì‹œ divì— ë„£ì–´ì„œ ì •ë¦¬
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                
                // ëª¨ë“  ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì„ ëª…ì‹œì ìœ¼ë¡œ ìœ ì§€
                const allElements = tempDiv.querySelectorAll('*');
                allElements.forEach(el => {
                    // ìŠ¤íƒ€ì¼ì´ ìˆëŠ” ìš”ì†ŒëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€
                    if (el.style && el.style.cssText) {
                        el.setAttribute('style', el.style.cssText);
                    }
                });
                
                return tempDiv.innerHTML;
            }
            
            const cleanedHTML = prepareHTMLForNaver(htmlContent);
            
            // ClipboardItem APIë¥¼ ì‚¬ìš©í•˜ì—¬ HTML í˜•ì‹ìœ¼ë¡œ ë³µì‚¬ (ìµœì‹  ë¸Œë¼ìš°ì €)
            if (navigator.clipboard && navigator.clipboard.write && window.ClipboardItem) {
                const htmlBlob = new Blob([cleanedHTML], { type: 'text/html' });
                const textBlob = new Blob([contentElement.innerText || contentElement.textContent], { type: 'text/plain' });
                
                const clipboardItem = new ClipboardItem({
                    'text/html': htmlBlob,
                    'text/plain': textBlob
                });
                
                navigator.clipboard.write([clipboardItem]).then(() => {
                    alert('ë³¸ë¬¸ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì—ë””í„°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.');
                }).catch(() => {
                    // í´ë°±: contentEditable ë°©ì‹
                    copyUsingContentEditable(cleanedHTML);
                });
            } else {
                // í´ë°±: contentEditable ë°©ì‹
                copyUsingContentEditable(cleanedHTML);
            }
            
            function copyUsingContentEditable(html) {
                // contentEditable divë¥¼ ì‚¬ìš©í•˜ì—¬ HTML í˜•ì‹ìœ¼ë¡œ ë³µì‚¬
                const tempDiv = document.createElement('div');
                tempDiv.contentEditable = true;
                tempDiv.innerHTML = html;
                tempDiv.style.position = 'fixed';
                tempDiv.style.left = '-999999px';
                tempDiv.style.top = '-999999px';
                tempDiv.style.width = '100%';
                tempDiv.style.height = 'auto';
                document.body.appendChild(tempDiv);
                
                // ë²”ìœ„ ì„ íƒ
                const range = document.createRange();
                range.selectNodeContents(tempDiv);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
                
                try {
                    // ë³µì‚¬ ì‹¤í–‰
                    const success = document.execCommand('copy');
                    if (success) {
                        alert('ë³¸ë¬¸ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì—ë””í„°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.');
                    } else {
                        throw new Error('ë³µì‚¬ ëª…ë ¹ ì‹¤íŒ¨');
                    }
                } catch (err) {
                    // ìµœì¢… í´ë°±: í…ìŠ¤íŠ¸ë§Œ ë³µì‚¬
                    navigator.clipboard.writeText(contentElement.innerText || contentElement.textContent).then(() => {
                        alert('í…ìŠ¤íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. (HTML í˜•ì‹ ë³µì‚¬ ì‹¤íŒ¨)');
                    }).catch(() => {
                        alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìœ„ì˜ ë‚´ìš©ì„ ì§ì ‘ ì„ íƒ(Ctrl+A)í•´ì„œ ë³µì‚¬(Ctrl+C)í•´ì£¼ì„¸ìš”.');
                    });
                } finally {
                    // ì •ë¦¬
                    selection.removeAllRanges();
                    document.body.removeChild(tempDiv);
                }
            }
        }

        async function _0x7n8o() {
            const storeName = document.getElementById('storeName').value.trim();
            
            if (!storeName) {
                alert('ë§¤ì¥ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const autoCollectBtn = document.getElementById('autoCollectBtn');
            const originalText = autoCollectBtn.textContent;
            
            autoCollectBtn.disabled = true;
            autoCollectBtn.textContent = 'ê²€ìƒ‰ ì¤‘...';

            try {
                // ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ë¸”ë¡œê·¸ URL ìˆ˜ì§‘ ì‹œë„
                let blogUrls = [];
                
                // ë°©ë²• 1: ë„¤ì´ë²„ ê²€ìƒ‰ JSON API ì‹œë„
                try {
                    blogUrls = await _0x5t6u(storeName);
                    console.log('API ë°©ì‹ìœ¼ë¡œ ì°¾ì€ URL:', blogUrls);
                } catch (e) {
                    console.log('API ë°©ì‹ ì‹¤íŒ¨, HTML íŒŒì‹± ì‹œë„:', e);
                }
                
                // ë°©ë²• 2: HTML íŒŒì‹± ì‹œë„ (APIê°€ ì‹¤íŒ¨í•œ ê²½ìš°)
                if (blogUrls.length === 0) {
                    try {
                        const searchQuery = encodeURIComponent(storeName);
                        const searchUrl = `https://search.naver.com/search.naver?where=post&query=${searchQuery}`;
                        const html = await _0x5j6k(searchUrl);
                        
                        if (html) {
                            blogUrls = _0x9f0g(html);
                            console.log('HTML íŒŒì‹±ìœ¼ë¡œ ì°¾ì€ URL:', blogUrls);
                        }
                    } catch (e) {
                        console.log('HTML íŒŒì‹± ì‹¤íŒ¨:', e);
                    }
                }
                
                // ë°©ë²• 3: ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì§ì ‘ ê²€ìƒ‰ í˜ì´ì§€ ì‹œë„
                if (blogUrls.length === 0) {
                    try {
                        const blogSearchUrl = `https://search.naver.com/search.naver?where=post&sm=tab_jum&query=${encodeURIComponent(storeName)}`;
                        const html = await _0x5j6k(blogSearchUrl);
                        
                        if (html) {
                            blogUrls = _0x9f0g(html);
                            console.log('ë¸”ë¡œê·¸ ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì°¾ì€ URL:', blogUrls);
                        }
                    } catch (e) {
                        console.log('ë¸”ë¡œê·¸ ê²€ìƒ‰ í˜ì´ì§€ ì‹¤íŒ¨:', e);
                    }
                }
                
                if (blogUrls.length === 0) {
                    throw new Error('ë¸”ë¡œê·¸ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\ní•´ê²° ë°©ë²•:\n1. ë§¤ì¥ëª…ì„ ë” êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í•´ë³´ì„¸ìš”\n2. ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ë¥¼ ì§ì ‘ ì—´ì–´ì„œ URLì„ ë³µì‚¬í•´ì£¼ì„¸ìš”\n3. ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨(CORS Unblock)ì„ ì„¤ì¹˜í•´ë³´ì„¸ìš”');
                }

                // ìƒìœ„ 3ê°œë§Œ ì‚¬ìš©
                const top3Urls = blogUrls.slice(0, 3);
                
                // ê° ë¸”ë¡œê·¸ URLì„ ì°¸ê³ ê¸€ 1,2,3ì— ìë™ìœ¼ë¡œ ì…ë ¥í•˜ê³  ìˆ˜ì§‘
                let successCount = 0;
                for (let i = 0; i < top3Urls.length; i++) {
                    const num = i + 1;
                    const urlInput = document.getElementById(`blogUrl${num}`);
                    const textarea = document.getElementById(`reference${num}`);
                    
                    // URL ì…ë ¥
                    urlInput.value = top3Urls[i];
                    
                    // ìˆ˜ì§‘ ì§„í–‰ ìƒíƒœ í‘œì‹œ
                    autoCollectBtn.textContent = `${num}/3 ìˆ˜ì§‘ ì¤‘...`;
                    textarea.value = `ë¸”ë¡œê·¸ ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤... (${num}/3)`;
                    textarea.style.color = '#667eea';
                    
                    // ë¸”ë¡œê·¸ ë‚´ìš© ìˆ˜ì§‘
                    try {
                        await _0x3d4e(num, top3Urls[i]);
                        successCount++;
                    } catch (error) {
                        console.error(`ë¸”ë¡œê·¸ ${num} ìˆ˜ì§‘ ì‹¤íŒ¨:`, error);
                        textarea.value = `ìˆ˜ì§‘ ì‹¤íŒ¨: ${error.message}\n\nURL: ${top3Urls[i]}\n\nìˆ˜ë™ìœ¼ë¡œ "ìˆ˜ì§‘" ë²„íŠ¼ì„ í´ë¦­í•´ë³´ì„¸ìš”.`;
                        textarea.style.color = '#dc3545';
                    }
                    
                    // ë‹¤ìŒ ìˆ˜ì§‘ ì „ ì ì‹œ ëŒ€ê¸° (ì„œë²„ ë¶€í•˜ ë°©ì§€)
                    if (i < top3Urls.length - 1) {
                        await new Promise(resolve => setTimeout(resolve, 1500));
                    }
                }

                if (successCount > 0) {
                    alert(`ìƒìœ„ ${top3Urls.length}ê°œ ë¸”ë¡œê·¸ URLì„ ì°¾ì•˜ê³ , ${successCount}ê°œë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤!`);
                } else {
                    alert(`ìƒìœ„ ${top3Urls.length}ê°œ ë¸”ë¡œê·¸ URLì„ ì°¾ì•˜ì§€ë§Œ ìˆ˜ì§‘ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n\nê° ì°¸ê³ ê¸€ì˜ "ìˆ˜ì§‘" ë²„íŠ¼ì„ ìˆ˜ë™ìœ¼ë¡œ í´ë¦­í•´ë³´ì„¸ìš”.`);
                }
                
            } catch (error) {
                console.error('Error:', error);
                alert('ìë™ ìˆ˜ì§‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                autoCollectBtn.disabled = false;
                autoCollectBtn.textContent = originalText;
            }
        }
        
        function _0x9p0q() {
            const storeName = document.getElementById('storeName').value.trim();
            if (!storeName) {
                alert('ë¨¼ì € ë§¤ì¥ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            const searchUrl = `https://search.naver.com/search.naver?where=post&query=${encodeURIComponent(storeName)}`;
            window.open(searchUrl, '_blank');
        }
        
        async function _0x5t6u(query) {
            const blogUrls = [];
            const seenUrls = new Set();
            
            const apiUrls = [
                `https://openapi.naver.com/v1/search/blog.json?query=${encodeURIComponent(query)}&display=3&sort=sim`,
                `https://search.naver.com/search.naver?where=post&query=${encodeURIComponent(query)}&display=3`
            ];
            
            try {
                const searchUrl = `https://search.naver.com/search.naver?where=post&query=${encodeURIComponent(query)}`;
                const html = await _0x5j6k(searchUrl);
                
                if (html) {
                    // HTMLì—ì„œ JSON ë°ì´í„° ì¶”ì¶œ ì‹œë„
                    // ë„¤ì´ë²„ëŠ” ë³´í†µ window.__NEXT_DATA__ ë˜ëŠ” ë‹¤ë¥¸ ì „ì—­ ë³€ìˆ˜ì— ë°ì´í„°ë¥¼ ì €ì¥
                    const jsonMatches = [
                        /window\.__NEXT_DATA__\s*=\s*({.+?});/s,
                        /window\.__initialData__\s*=\s*({.+?});/s,
                        /"items":\s*\[(.*?)\]/s,
                        /blog\.naver\.com\/[^\/\s"']+\/\d+/g
                    ];
                    
                    for (const pattern of jsonMatches) {
                        const matches = html.match(pattern);
                        if (matches) {
                            // ë¸”ë¡œê·¸ URL ì§ì ‘ ì¶”ì¶œ
                            const urlMatches = html.matchAll(/https?:\/\/blog\.naver\.com\/[^\/\s"']+\/\d+/g);
                            for (const match of urlMatches) {
                                const url = match[0];
                                if (!seenUrls.has(url)) {
                                    seenUrls.add(url);
                                    blogUrls.push(url);
                                }
                            }
                            
                            if (blogUrls.length >= 3) break;
                        }
                    }
                }
            } catch (e) {
                console.error('API ê²€ìƒ‰ ì‹¤íŒ¨:', e);
            }
            
            return blogUrls;
        }
        window._0x5t6u=_0x5t6u;

        function _0x9f0g(html) {
            const blogUrls = [];
            const seenUrls = new Set(); // ì¤‘ë³µ ë°©ì§€ìš© Set
            
            const urlPatterns = [
                /https?:\/\/blog\.naver\.com\/[^\/\s"']+\/\d+/g,
                /blog\.naver\.com\/[^\/\s"']+\/\d+/g,
                /url=([^&]*blog\.naver\.com[^&]*)/g,
                /"link":"([^"]*blog\.naver\.com[^"]*)"/g,
                /"url":"([^"]*blog\.naver\.com[^"]*)"/g,
                /href="([^"]*blog\.naver\.com[^"]*)"/g,
                /href='([^']*blog\.naver\.com[^']*)'/g
            ];
            
            for (const pattern of urlPatterns) {
                const matches = html.matchAll(pattern);
                for (const match of matches) {
                    let url = match[0] || match[1];
                    
                    // URL ì •ê·œí™”
                    if (url) {
                        // JSON í˜•ì‹ì—ì„œ ì¶”ì¶œí•œ ê²½ìš° (ì´ìŠ¤ì¼€ì´í”„ ë¬¸ì ì œê±°)
                        url = url.replace(/\\\//g, '/').replace(/\\u([0-9a-fA-F]{4})/g, (match, code) => {
                            return String.fromCharCode(parseInt(code, 16));
                        });
                        
                        // url= íŒŒë¼ë¯¸í„°ì—ì„œ ì¶”ì¶œí•œ ê²½ìš°
                        if (url.includes('url=')) {
                            const urlMatch = url.match(/url=([^&]+)/);
                            if (urlMatch) {
                                url = decodeURIComponent(urlMatch[1]);
                            }
                        }
                        
                        // hrefë‚˜ link ì†ì„±ì—ì„œ ì¶”ì¶œí•œ ê²½ìš°
                        if (url.includes('href=') || url.includes('link=')) {
                            const urlMatch = url.match(/(?:href|link)=["']?([^"'\s]+)["']?/);
                            if (urlMatch) {
                                url = urlMatch[1];
                            }
                        }
                        
                        // httpê°€ ì—†ìœ¼ë©´ ì¶”ê°€
                        if (!url.startsWith('http')) {
                            url = 'https://' + url.replace(/^\/\//, '');
                        }
                        
                        // ìœ íš¨í•œ ë¸”ë¡œê·¸ URL í˜•ì‹ì¸ì§€ í™•ì¸
                        if (url.match(/https?:\/\/blog\.naver\.com\/[^\/]+\/\d+/)) {
                            // URL ì •ê·œí™” (ìµœì¢…)
                            url = url.split('&')[0].split('?')[0]; // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì œê±°
                            
                            // ì¤‘ë³µ ì œê±°
                            if (!seenUrls.has(url)) {
                                seenUrls.add(url);
                                blogUrls.push(url);
                            }
                        }
                    }
                }
                
                if (blogUrls.length >= 3) break;
            }
            
            if (blogUrls.length < 3) {
                try {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    
                    // ì—¬ëŸ¬ ì„ íƒì ì‹œë„
                    const selectors = [
                        'a[href*="blog.naver.com"]',
                        '.api_subject_bx a',
                        '.sh_blog_top a',
                        '.total_tit a',
                        '.title_link',
                        '.sh_blog_title',
                        '[class*="blog"] a'
                    ];
                    
                    for (const selector of selectors) {
                        const links = doc.querySelectorAll(selector);
                        for (const link of links) {
                            let url = link.getAttribute('href') || link.href || '';
                            
                            // ë„¤ì´ë²„ ê²€ìƒ‰ ê²°ê³¼ URLì—ì„œ ì‹¤ì œ ë¸”ë¡œê·¸ URL ì¶”ì¶œ
                            if (url.includes('url=')) {
                                const match = url.match(/url=([^&]+)/);
                                if (match) {
                                    url = decodeURIComponent(match[1]);
                                }
                            }
                            
                            // blog.naver.com í˜•ì‹ìœ¼ë¡œ ë³€í™˜
                            if (url && url.includes('blog.naver.com')) {
                                if (!url.startsWith('http')) {
                                    url = 'https://' + url.replace(/^\/\//, '');
                                }
                                
                                // ìœ íš¨í•œ URLì¸ì§€ í™•ì¸
                                if (url.match(/https?:\/\/blog\.naver\.com\/[^\/]+\/\d+/)) {
                                    if (!seenUrls.has(url)) {
                                        seenUrls.add(url);
                                        blogUrls.push(url);
                                    }
                                }
                            }
                        }
                        
                        if (blogUrls.length >= 3) break;
                    }
                } catch (e) {
                    console.error('DOM íŒŒì‹± ì˜¤ë¥˜:', e);
                }
            }
            
            return blogUrls.slice(0, 3);
        }
        window._0x5t6u=_0x5t6u;window._0x9f0g=_0x9f0g;

        // ë¸”ë¡œê·¸ í¬ë¡¤ë§ ë‚´ë¶€ í•¨ìˆ˜ (URLì„ ì§ì ‘ ë°›ì•„ì„œ ì²˜ë¦¬)
        async function _0x3d4e(num, url) {
            const textarea = document.getElementById(`reference${num}`);
            
            let targetUrl = url;
            if (url.includes('blog.naver.com/') && !url.includes('m.blog.naver.com')) {
                targetUrl = url.replace('blog.naver.com/', 'm.blog.naver.com/');
            }

            const html = await _0x5j6k(targetUrl);
            
            if (!html) {
                throw new Error('ë¸”ë¡œê·¸ ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }

            const content = _0x9n0o(html);
            
            if (!content || content.trim().length === 0) {
                throw new Error('ë¸”ë¡œê·¸ ë³¸ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }

            textarea.value = content;
            textarea.style.color = '#333';
        }

        // ë¸”ë¡œê·¸ í¬ë¡¤ë§ í•¨ìˆ˜ (textareaì— ì§ì ‘ ì…ë ¥)
        async function _0x5f6g(num) {
            const urlInput = document.getElementById(`blogUrl${num}`);
            const textarea = document.getElementById(`reference${num}`);
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('ë„¤ì´ë²„ ë¸”ë¡œê·¸ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!url.includes('blog.naver.com')) {
                alert('ì˜¬ë°”ë¥¸ ë„¤ì´ë²„ ë¸”ë¡œê·¸ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\nì˜ˆ: https://blog.naver.com/ì•„ì´ë””/1234567890');
                return;
            }

            const crawlBtn = urlInput.nextElementSibling;
            const originalText = crawlBtn.textContent;
            
            crawlBtn.disabled = true;
            crawlBtn.textContent = 'ìˆ˜ì§‘ ì¤‘...';
            textarea.value = 'ë¸”ë¡œê·¸ ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...';
            textarea.style.color = '#667eea';

            try {
                await _0x3d4e(num, url);
                alert('ë¸”ë¡œê·¸ ë‚´ìš©ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì§‘ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } catch (error) {
                console.error('Error:', error);
                textarea.value = `ì˜¤ë¥˜ ë°œìƒ: ${error.message}\n\në‹¤ìŒ ë°©ë²•ì„ ì‹œë„í•´ë³´ì„¸ìš”:\n1. ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨(CORS Unblock) ì„¤ì¹˜\n2. URLì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸\n3. ë¸”ë¡œê·¸ê°€ ê³µê°œë˜ì–´ ìˆëŠ”ì§€ í™•ì¸`;
                textarea.style.color = '#dc3545';
                alert('í¬ë¡¤ë§ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                crawlBtn.disabled = false;
                crawlBtn.textContent = originalText;
            }
        }

        async function _0x5j6k(url) {
            // ë¨¼ì € ì§ì ‘ ì‹œë„ (ê°™ì€ ë„ë©”ì¸ì´ê±°ë‚˜ CORSê°€ í—ˆìš©ëœ ê²½ìš°)
            try {
                const response = await fetch(url, {
                    mode: 'cors',
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                    }
                });
                
                if (response.ok) {
                    return await response.text();
                }
            } catch (e) {
                console.log('Direct fetch failed, trying proxy...');
            }

            // í”„ë¡ì‹œë¥¼ í†µí•´ ì‹œë„
            for (let i = 0; i < window._0x9i0j.length; i++) {
                try {
                    const proxyUrl = window._0x9i0j[i] + encodeURIComponent(url);
                    const response = await fetch(proxyUrl, {
                        mode: 'cors'
                    });
                    
                    if (response.ok) {
                        return await response.text();
                    }
                } catch (e) {
                    console.log(`Proxy ${i} failed, trying next...`);
                    continue;
                }
            }

            throw new Error('ëª¨ë“  í”„ë¡ì‹œ ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
        window._0x5j6k=_0x5j6k;

        function _0x9n0o(html) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            
            // ë°©ë²• 1: ëª¨ë°”ì¼ ë¸”ë¡œê·¸ì˜ se_component_wrap í´ë˜ìŠ¤
            let content = doc.querySelector('.se_component_wrap');
            if (content) {
                return window._0x1b2c(content);
            }

            // ë°©ë²• 2: se-main-container í´ë˜ìŠ¤
            content = doc.querySelector('.se-main-container');
            if (content) {
                return window._0x1b2c(content);
            }

            // ë°©ë²• 3: post-view í´ë˜ìŠ¤
            content = doc.querySelector('.post-view');
            if (content) {
                return window._0x1b2c(content);
            }

            // ë°©ë²• 4: post_ct í´ë˜ìŠ¤
            content = doc.querySelector('.post_ct');
            if (content) {
                return window._0x1b2c(content);
            }

            // ë°©ë²• 5: _postView í´ë˜ìŠ¤
            content = doc.querySelector('._postView');
            if (content) {
                return window._0x1b2c(content);
            }

            // ë°©ë²• 6: article íƒœê·¸
            content = doc.querySelector('article');
            if (content) {
                return window._0x1b2c(content);
            }

            // ë°©ë²• 7: ë³¸ë¬¸ì´ í¬í•¨ëœ iframe ì°¾ê¸° (ë„¤ì´ë²„ ë¸”ë¡œê·¸ëŠ” iframeì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ)
            const iframe = doc.querySelector('iframe#mainFrame, iframe.se-main-frame');
            if (iframe) {
                // iframeì˜ srcì—ì„œ ì‹¤ì œ ë¸”ë¡œê·¸ URL ì¶”ì¶œ
                const iframeSrc = iframe.getAttribute('src');
                if (iframeSrc) {
                    // iframe ë‚´ìš©ì€ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´
                    return null;
                }
            }

            // ë°©ë²• 8: body ì „ì²´ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (ìµœí›„ì˜ ìˆ˜ë‹¨)
            const body = doc.body;
            if (body) {
                // ìŠ¤í¬ë¦½íŠ¸, ìŠ¤íƒ€ì¼, ë„¤ë¹„ê²Œì´ì…˜ ë“± ì œê±°
                const scripts = body.querySelectorAll('script, style, nav, header, footer, .header, .footer, .nav');
                scripts.forEach(el => el.remove());
                
                return window._0x1b2c(body);
            }

            return null;
        }

        function _0x1b2c(element) {
            if (!element) return '';

            // í´ë¡  ìƒì„±í•˜ì—¬ ì›ë³¸ ë³´ì¡´
            const clone = element.cloneNode(true);
            
            // ë¶ˆí•„ìš”í•œ ìš”ì†Œ ì œê±°
            const removeSelectors = [
                'script', 'style', 'nav', 'header', 'footer',
                '.ad', '.advertisement', '.banner',
                '.comment', '.reply', '.social',
                'iframe', 'noscript'
            ];
            
            removeSelectors.forEach(selector => {
                clone.querySelectorAll(selector).forEach(el => el.remove());
            });

            // í…ìŠ¤íŠ¸ ì¶”ì¶œ
            let text = clone.innerText || clone.textContent || '';
            
            // ê³µë°± ì •ë¦¬
            text = text
                .replace(/\s+/g, ' ')  // ì—¬ëŸ¬ ê³µë°±ì„ í•˜ë‚˜ë¡œ
                .replace(/\n\s*\n/g, '\n\n')  // ì—¬ëŸ¬ ì¤„ë°”ê¿ˆì„ ë‘ ê°œë¡œ
                .trim();

            // í•œê¸€ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
            const hasKorean = /[ê°€-í£]/.test(text);
            
            if (!hasKorean || text.length < 50) {
                // í•œê¸€ì´ ì—†ê±°ë‚˜ ë„ˆë¬´ ì§§ìœ¼ë©´ ì‹¤íŒ¨ë¡œ ê°„ì£¼
                return null;
            }

            return text;
        }
        window._0x9n0o=_0x9n0o;window._0x1b2c=_0x1b2c;

        // Enter í‚¤ë¡œë„ ìˆ˜ì§‘ ê°€ëŠ¥í•˜ë„ë¡
        var _0x1b2c1=document.getElementById('blogUrl1');
        if(_0x1b2c1){_0x1b2c1.addEventListener('keypress',function(e){if(e.key==='Enter'){if(typeof _0x5f6g==='function'){_0x5f6g(1);}}});}
        var _0x3d4e1=document.getElementById('blogUrl2');
        if(_0x3d4e1){_0x3d4e1.addEventListener('keypress',function(e){if(e.key==='Enter'){if(typeof _0x5f6g==='function'){_0x5f6g(2);}}});}
        var _0x5f6g1=document.getElementById('blogUrl3');
        if(_0x5f6g1){_0x5f6g1.addEventListener('keypress',function(e){if(e.key==='Enter'){if(typeof _0x5f6g==='function'){_0x5f6g(3);}}});}
        
        // ë¬¸ì„œ ì¹˜í™˜ìš© ë§í¬ ì…ë ¥ì¹¸ì—ì„œ Enter í‚¤ë¡œ ìˆ˜ì§‘
        var documentUrlInput = document.getElementById('documentUrl');
        if(documentUrlInput){
            documentUrlInput.addEventListener('keypress', function(e) {
                if(e.key === 'Enter') {
                    if(typeof collectFromUrl === 'function') {
                        collectFromUrl();
                    }
                }
            });
        }
    </script>
</body>
</html>

