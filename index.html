<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì±„ìš°ë¯¸ íŠ¸ëœë“œ ì›ê³ ìƒì„±ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .section {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title-with-button {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copy-btn-inline {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            white-space: nowrap;
            margin-left: 15px;
        }

        .copy-btn-inline:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .copy-btn-inline:active {
            transform: translateY(0);
        }

        .btn-reset {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-reset:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .btn-reset:active {
            transform: translateY(0);
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 14px;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #6c757d;
            margin-top: 5px;
        }

        .btn-secondary:hover {
            background: #5a6268;
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);
        }

        .result-box {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            min-height: 100px;
            white-space: pre-wrap;
            line-height: 1.8;
            font-size: 16px;
            color: #333;
        }

        .result-box strong,
        .result-box .highlight {
            font-weight: bold;
            font-size: 19px;
            color: #333;
        }

        .title-list {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .title-item {
            padding: 12px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
        }

        .title-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .title-item.selected {
            background: #667eea;
            color: white;
        }

        .hidden {
            display: none;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 13px;
        }

        .copy-btn {
            background: #28a745;
            margin-top: 10px;
        }

        .copy-btn:hover {
            background: #218838;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-weight: bold;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-item input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .radio-item label {
            margin: 0;
            cursor: pointer;
            font-weight: 500;
            color: #333;
        }

        .blog-url-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .blog-url-input {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .blog-url-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn-crawl {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            white-space: nowrap;
        }

        .btn-crawl:hover {
            background: #138496;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(23, 162, 184, 0.4);
        }

        .btn-crawl:active {
            transform: translateY(0);
        }

        .btn-crawl:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ì±„ìš°ë¯¸ íŠ¸ëœë“œ ì›ê³  ìƒì„±ê¸°</h1>
        <p class="subtitle">íŠ¸ëœë“œ í‚¤ì›Œë“œ ê¸°ë°˜ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì›ê³  ìë™ ìƒì„± ë„êµ¬</p>

        <div style="text-align: right; margin-bottom: 20px;">
            <button class="btn-reset" onclick="_0x1h2i()">ì´ˆê¸°í™”</button>
        </div>

        <div class="section" style="background: #fff3cd; border-left-color: #ffc107;">
            <div class="section-title">0. API í‚¤ ì„¤ì •</div>
            <div class="warning" style="margin-bottom: 15px;">
                <strong>âš ï¸ ì¤‘ìš”:</strong> API í‚¤ëŠ” ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”. ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•˜ì§€ ë§ˆì„¸ìš”.
            </div>
            <div class="input-group">
                <label>Gemini API í‚¤</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="password" id="apiKeyInput" placeholder="AIzaSy..." style="flex: 1;">
                    <button class="btn-crawl" onclick="toggleApiKeyVisibility()" style="white-space: nowrap;">ë³´ê¸°/ìˆ¨ê¸°ê¸°</button>
                </div>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button class="btn btn-secondary" onclick="saveApiKey()" style="margin-top: 0;">API í‚¤ ì €ì¥</button>
                <button class="btn btn-secondary" onclick="downloadConfig()" style="margin-top: 0;">ì„¤ì • íŒŒì¼ ë‹¤ìš´ë¡œë“œ</button>
                <label class="btn btn-secondary" style="margin-top: 0; cursor: pointer; text-align: center;">
                    ì„¤ì • íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
                    <input type="file" id="configFileInput" accept=".json" style="display: none;" onchange="loadConfigFile(event)">
                </label>
            </div>
            <div id="apiKeyStatus" style="margin-top: 10px; padding: 10px; border-radius: 8px; display: none;"></div>
        </div>

        <div class="section">
            <div class="section-title">1. í‚¤ì›Œë“œ ì…ë ¥ ë° ë¸”ë¡œê·¸ ìˆ˜ì§‘</div>
            
            <div class="input-group">
                <label>í‚¤ì›Œë“œ</label>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="text" id="mainKeyword" placeholder="ì˜ˆ: ê°•ë‚¨ ë§›ì§‘, í™ëŒ€ ë§›ì§‘ ë“±" style="flex: 1;">
                    <button class="btn-crawl" onclick="collectAndGenerate()" id="collectBtn">ìˆ˜ì§‘ ë° ìƒì„±</button>
                </div>
                <div style="margin-top: 8px; font-size: 12px; color: #666; padding: 10px; background: #e7f3ff; border-radius: 6px; border-left: 4px solid #667eea;">
                    ğŸ’¡ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ê³  "ìˆ˜ì§‘ ë° ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì±„ìš°ë¯¸ ë°©ì¥ì˜ ì—„ì²­ë‚œ ì •ë³´ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ ìµœê·¼ ì •ë³´ë¥¼  ìˆ˜ì§‘í•œ í›„ ì œëª©ê³¼ ì›ê³ ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
                </div>
            </div>

            <div class="input-group" style="margin-top: 20px;">
                <label>íŠ¸ë Œë“œ í‚¤ì›Œë“œ ì°¸ê³  ì‚¬ì´íŠ¸</label>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px;">
                    <button class="btn-crawl" onclick="window.open('https://blackkiwi.net/service/trend', '_blank')" style="font-size: 13px; padding: 10px;">ë¸”ë™í‚¤ìœ„ íŠ¸ëœë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://www.signal.bz/', '_blank')" style="font-size: 13px; padding: 10px;">ì‹œê·¸ë„ ì‹¤ì‹œê°„ ê²€ìƒ‰ì–´</button>
                    <button class="btn-crawl" onclick="window.open('https://trends.google.co.kr/trending?geo=KR', '_blank')" style="font-size: 13px; padding: 10px;">êµ¬ê¸€ íŠ¸ëœë“œ í‚¤ì›Œë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://mktt.io/local-data/trending-keywords', '_blank')" style="font-size: 13px; padding: 10px;">ì‹¤ì‹œê°„ ì‡¼í•‘ í‚¤ì›Œë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://rank.ezme.net/', '_blank')" style="font-size: 13px; padding: 10px;">ì‹¤ì‹œê°„ ì¸ê¸° ê²€ìƒ‰ì–´</button>
                    <button class="btn-crawl" onclick="window.open('https://whereispost.com/hot/#google_vignette', '_blank')" style="font-size: 13px; padding: 10px;">ì›¨ì–´ì´ì¦ˆ í•« í‚¤ì›Œë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://search.danawa.com/keywordranking.php', '_blank')" style="font-size: 13px; padding: 10px;">ë‹¤ë‚˜ì™€ ì‡¼í•‘ í‚¤ì›Œë“œ</button>
                    <button class="btn-crawl" onclick="window.open('https://www.kinds.or.kr/', '_blank')" style="font-size: 13px; padding: 10px; background: #ff6b6b; border-color: #ff6b6b;">ë¹…ì¹´ì¸ì¦ˆ (ë°©ì¥ìµœì• )</button>
                </div>
            </div>

            <div id="blogCollectionStatus" style="display: none; margin-top: 15px; padding: 15px; background: #e7f3ff; border-radius: 8px; border-left: 4px solid #667eea;">
                <div style="font-weight: bold; margin-bottom: 10px; color: #333;">ğŸ“ ìµœì‹  ìˆ˜ì§‘ ì •ë³´:</div>
                <div id="blogStatusList" style="font-size: 14px; color: #555; line-height: 1.8;">
                    <!-- ìˆ˜ì§‘ ìƒíƒœê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ìˆ¨ê²¨ì§„ textarea (ìë™ ìˆ˜ì§‘ëœ ë¸”ë¡œê·¸ ë‚´ìš© ì €ì¥ìš©) -->
            <textarea id="reference1" style="display: none;"></textarea>
            <textarea id="reference2" style="display: none;"></textarea>
            <textarea id="reference3" style="display: none;"></textarea>
        </div>

        <div id="titleSection" class="section hidden">
            <div class="section-title">2. ì œëª© ì„ íƒ</div>
            <div id="titleList" class="title-list"></div>
            <div id="selectedTitleDisplay" class="hidden" style="margin-top: 20px; padding: 15px; background: #e7f3ff; border-radius: 8px; border-left: 4px solid #667eea;">
                <div style="font-weight: bold; margin-bottom: 10px; color: #333;">ì„ íƒëœ ì œëª©:</div>
                <div id="selectedTitleText" style="color: #555; font-size: 15px;"></div>
            </div>
            <button id="generateContentBtn" class="btn hidden" onclick="_0x9z0a()" style="margin-top: 15px;">í¬ìŠ¤íŒ… ì›ê³  ìƒì„±í•˜ê¸°</button>
            <button class="btn btn-secondary" onclick="_0x3j4k()" style="margin-top: 10px;">ë‹¤ì‹œ ìƒì„±í•˜ê¸°</button>
        </div>

        <div id="contentSection" class="section hidden">
            <div class="section-title section-title-with-button">
                <span>3. ìƒì„±ëœ ë³¸ë¬¸</span>
                <button class="copy-btn-inline" onclick="_0x5l6m()">ìƒì„±ëœê¸€ ë³µì‚¬</button>
            </div>
            <div id="contentResult" class="result-box"></div>
        </div>
    </div>

    <script>
        (function(){
            var _0x1a2b=['gemini-2.5-flash'],_0x3c4d=[''];
            var _0x5e6f=_0x1a2b[0],_0x7g8h=_0x3c4d[0];
            var _0x9i0j=['https://api.allorigins.win/raw?url=','https://corsproxy.io/?','https://cors-anywhere.herokuapp.com/','https://api.codetabs.com/v1/proxy?quest=','https://thingproxy.freeboard.io/fetch/'];
            var _0x1k2l='',_0x3m4n='',_0x5o6p={};
            function _0x7q8r(){if(!_0x7g8h)throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');return `https://generativelanguage.googleapis.com/v1beta/models/${_0x5e6f}:generateContent?key=${_0x7g8h}`;}
            function _0x9s0t(){var _0x1u2v=localStorage.getItem('gemini_api_key');if(_0x1u2v){_0x7g8h=_0x1u2v;document.getElementById('apiKeyInput').value=_0x1u2v;_0x3w4x('ì €ì¥ëœ API í‚¤ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.','success');}else{_0x3w4x('API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.','warning');}}
            function _0x5y6z(){var _0x7a8b=document.getElementById('apiKeyInput').value.trim();if(!_0x7a8b){alert('API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');return;}if(!_0x7a8b.startsWith('AIzaSy')){if(!confirm('API í‚¤ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){return;}}_0x7g8h=_0x7a8b;localStorage.setItem('gemini_api_key',_0x7a8b);_0x3w4x('API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.','success');}
            function _0x9c0d(){var _0x1e2f=document.getElementById('apiKeyInput');if(_0x1e2f.type==='password'){_0x1e2f.type='text';}else{_0x1e2f.type='password';}}
            function _0x3w4x(_0x5g6h,_0x7i8j){var _0x9k0l=document.getElementById('apiKeyStatus');_0x9k0l.style.display='block';_0x9k0l.textContent=_0x5g6h;_0x9k0l.style.background=_0x7i8j==='success'?'#d4edda':'#fff3cd';_0x9k0l.style.border=_0x7i8j==='success'?'1px solid #c3e6cb':'1px solid #ffc107';_0x9k0l.style.color=_0x7i8j==='success'?'#155724':'#856404';setTimeout(()=>{if(_0x7i8j==='success'){_0x9k0l.style.display='none';}},3000);}
            function _0x1m2n(){var _0x3o4p=document.getElementById('apiKeyInput').value.trim()||_0x7g8h;if(!_0x3o4p){alert('ì €ì¥í•  API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.');return;}var _0x5q6r={gemini_api_key:_0x3o4p,gemini_model:_0x5e6f,saved_at:new Date().toISOString()};var _0x7s8t=new Blob([JSON.stringify(_0x5q6r,null,2)],{type:'application/json'});var _0x9u0v=URL.createObjectURL(_0x7s8t);var _0x1w2x=document.createElement('a');_0x1w2x.href=_0x9u0v;_0x1w2x.download='config.json';document.body.appendChild(_0x1w2x);_0x1w2x.click();document.body.removeChild(_0x1w2x);URL.revokeObjectURL(_0x9u0v);_0x3w4x('ì„¤ì • íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.','success');}
            function _0x3y4z(_0x5a6b){var _0x7c8d=_0x5a6b.target.files[0];if(!_0x7c8d)return;var _0x9e0f=new FileReader();_0x9e0f.onload=function(_0x1g2h){try{var _0x3i4j=JSON.parse(_0x1g2h.target.result);if(_0x3i4j.gemini_api_key){_0x7g8h=_0x3i4j.gemini_api_key;document.getElementById('apiKeyInput').value=_0x3i4j.gemini_api_key;localStorage.setItem('gemini_api_key',_0x3i4j.gemini_api_key);_0x3w4x('ì„¤ì • íŒŒì¼ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.','success');}else{alert('ì„¤ì • íŒŒì¼ì— API í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤.');}}catch(_0x5k6l){alert('ì„¤ì • íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: '+_0x5k6l.message);}};_0x9e0f.readAsText(_0x7c8d);_0x5a6b.target.value='';}
            window.addEventListener('DOMContentLoaded',function(){_0x9s0t();});
            window.getGeminiApiUrl=_0x7q8r;window.loadApiKey=_0x9s0t;window.saveApiKey=_0x5y6z;window.toggleApiKeyVisibility=_0x9c0d;window.showApiKeyStatus=_0x3w4x;window.downloadConfig=_0x1m2n;window.loadConfigFile=_0x3y4z;
            var _0x1k2l='',_0x3m4n='',_0x5o6p={};
            async function _0x1a2b(){var _0x3c4d=document.getElementById('mainKeyword').value.trim();if(!_0x3c4d){alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');return;}var _0x5e6f=document.getElementById('collectBtn');var _0x7g8h=_0x5e6f.textContent;_0x5e6f.disabled=true;_0x5e6f.textContent='ì—„ì²­ë‚œ ì •ë³´ë³´ ìˆ˜ì§‘ ì¤‘...';var _0x9i0j=document.getElementById('blogCollectionStatus');var _0x1k2m=_0x9i0j.querySelector('#blogStatusList')||document.getElementById('blogStatusList');_0x9i0j.style.display='block';_0x1k2m.innerHTML='ì±„ìš°ë¯¸ ë°©ì¥ì˜ ì—„ì²­ë‚œ ì •ë³´ ë¡œì§ì„ ë°›ì•„ì„œ ìµœì‹  ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤...';try{var _0x3n4o=await _0x5p6q(_0x3c4d);if(_0x3n4o.length===0){throw new Error('ì •ë³´ë³´ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');}_0x1k2m.innerHTML=`${_0x3n4o.length}ê°œì˜ ë¸”ë¡œê·¸ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤...`;var _0x7r8s=[];var _0x9t0u=0;for(var _0x1v2w=0;_0x1v2w<_0x3n4o.length;_0x1v2w++){var _0x3x4y=_0x1v2w+1;_0x1k2m.innerHTML=`${_0x3x4y}/${_0x3n4o.length} ì •ë³´ ìˆ˜ì§‘ ì¤‘...`;try{var _0x5z6a=await _0x7b8c(_0x3n4o[_0x1v2w]);if(_0x5z6a&&_0x5z6a.trim().length>0){_0x7r8s.push(_0x5z6a);_0x9t0u++;}}catch(_0x9d0e){console.error(`ë¸”ë¡œê·¸ ${_0x3x4y} ìˆ˜ì§‘ ì‹¤íŒ¨:`,_0x9d0e);_0x7r8s.push('');}if(_0x1v2w<_0x3n4o.length-1){await new Promise(_0x1f2g=>setTimeout(_0x1f2g,1500));}}if(_0x7r8s[0])document.getElementById('reference1').value=_0x7r8s[0];if(_0x7r8s[1])document.getElementById('reference2').value=_0x7r8s[1];if(_0x7r8s[2])document.getElementById('reference3').value=_0x7r8s[2];_0x1k2m.innerHTML=`âœ… ì±„ìš°ë¯¸ë‹˜ì˜ ìµœì‹  ì •ë³´ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤.<br>ì´ì œ ì œëª©ì„ ìƒì„±í•©ë‹ˆë‹¤...`;_0x3m4n=_0x3c4d;_0x5o6p={visitType:'after',storeName:'',visitInfo:'',menu:'',tasteMemo:'',ref1:_0x7r8s[0]||'',ref2:_0x7r8s[1]||'',ref3:_0x7r8s[2]||''};await _0x7h8i();}catch(_0x9j0k){console.error('Error:',_0x9j0k);_0x1k2m.innerHTML=`<span style="color: #dc3545;">âŒ ì˜¤ë¥˜ ë°œìƒ: ${_0x9j0k.message}</span>`;alert('ë¸”ë¡œê·¸ ìˆ˜ì§‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: '+_0x9j0k.message);}finally{_0x5e6f.disabled=false;_0x5e6f.textContent=_0x7g8h;}}
            window.collectAndGenerate=_0x1a2b;

            async function _0x7b8c(_0x9d0e){var _0x1f2g=_0x9d0e;if(_0x9d0e.includes('blog.naver.com/')&&!_0x9d0e.includes('m.blog.naver.com')){_0x1f2g=_0x9d0e.replace('blog.naver.com/','m.blog.naver.com/');}var _0x3h4i=await _0x5j6k(_0x1f2g);if(!_0x3h4i){throw new Error('ë¸”ë¡œê·¸ ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');}var _0x7l8m=_0x9n0o(_0x3h4i);if(!_0x7l8m||_0x7l8m.trim().length===0){throw new Error('ë¸”ë¡œê·¸ ë³¸ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');}return _0x7l8m;}
            async function _0x5p6q(_0x1p2q){var _0x3r4s=[];try{_0x3r4s.push(...await _0x5t6u(_0x1p2q));console.log('API ë°©ì‹ìœ¼ë¡œ ì°¾ì€ URL:',_0x3r4s.length);}catch(_0x7v8w){console.log('API ë°©ì‹ ì‹¤íŒ¨, HTML íŒŒì‹± ì‹œë„:',_0x7v8w);}if(_0x3r4s.length===0){try{var _0x9x0y=encodeURIComponent(_0x1p2q);var _0x1z2a=`https://search.naver.com/search.naver?where=post&query=${_0x9x0y}`;var _0x3b4c=await _0x5j6k(_0x1z2a);if(_0x3b4c){var _0x7d8e=_0x9f0g(_0x3b4c);_0x3r4s.push(..._0x7d8e);console.log('HTML íŒŒì‹±ìœ¼ë¡œ ì°¾ì€ URL:',_0x3r4s.length);}}catch(_0x1h2i){console.log('HTML íŒŒì‹± ì‹¤íŒ¨:',_0x1h2i);}}return _0x3r4s.slice(0,3);}
            async function _0x7h8i(){var _0x3j4k=_0x3m4n;var _0x5l6m=_0x5o6p.ref1||'';var _0x7n8o=_0x5o6p.ref2||'';var _0x9p0q=_0x5o6p.ref3||'';

            const titleList = document.getElementById('titleList');
            titleList.innerHTML = '<div class="loading">ì œëª©ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</div>';
            document.getElementById('titleSection').classList.remove('hidden');

            try {
                const prompt = `# ì—­í•  ì§€ì •

ë‹¹ì‹ ì€ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ë¡œì§(C-RANK, DIA+)ì— ìµœì í™”ëœ ì „ë¬¸ ì‘ê°€ì…ë‹ˆë‹¤.

# í”„ë¡œì„¸ìŠ¤ 1: ì œëª© ìƒì„±

ì•„ë˜ ì¡°ê±´ì— ë§ì¶° ì œëª© 5ê°œë¥¼ ì œì‹œí•˜ì‹­ì‹œì˜¤.

- ì¡°ê±´: ë©”ì¸í‚¤ì›Œë“œ, ì—°ê´€í‚¤ì›Œë“œ, ë¡±í…Œì¼í‚¤ì›Œë“œë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì¡°í•©í•  ê²ƒ.
- ëª©í‘œ: ê²€ìƒ‰ ë…¸ì¶œ ë° í´ë¦­ë¥  ìœ ë„.
- ì¶œë ¥: ì œëª©ë§Œ ê¹”ë”í•˜ê²Œ ì¶œë ¥í•˜ê³ , ì‚¬ìš©ìì˜ ì„ íƒì„ ê¸°ë‹¤ë¦¬ì‹­ì‹œì˜¤. (ë³¸ë¬¸ ì‘ì„± ê¸ˆì§€)

ë©”ì¸ í‚¤ì›Œë“œ: ${keyword}

ì œëª© 5ê°œë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.`;

                if (!_0x7g8h) {
                    throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');
                }

                const response = await fetch(getGeminiApiUrl(), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message || 'API ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }

                const generatedText = data.candidates[0].content.parts[0].text;
                const titles = _0x3t4u(generatedText);
                
                _0x5v6w(titles);
            } catch (error) {
                console.error('Error:', error);
                alert('ì œëª© ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                document.getElementById('titleSection').classList.add('hidden');
            }
        }

        async function _0x1r2s() {
            const keyword = document.getElementById('mainKeyword').value.trim();
            const ref1 = document.getElementById('reference1').value.trim();
            const ref2 = document.getElementById('reference2').value.trim();
            const ref3 = document.getElementById('reference3').value.trim();

            if (!keyword) {
                alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            _0x3m4n = keyword;
            _0x5o6p = {
                visitType: 'after', // ê¸°ë³¸ê°’
                storeName: '',
                visitInfo: '',
                menu: '',
                tasteMemo: '',
                ref1: ref1,
                ref2: ref2,
                ref3: ref3
            };

            const btn = event.target;
            btn.disabled = true;
            btn.textContent = 'ì œëª© ìƒì„± ì¤‘...';

            const titleList = document.getElementById('titleList');
            titleList.innerHTML = '<div class="loading">ì œëª©ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</div>';
            document.getElementById('titleSection').classList.remove('hidden');

            try {
                const prompt = `# ì—­í•  ì§€ì •

ë‹¹ì‹ ì€ ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ë¡œì§(C-RANK, DIA+)ì— ìµœì í™”ëœ ì „ë¬¸ ì‘ê°€ì…ë‹ˆë‹¤.

# í”„ë¡œì„¸ìŠ¤ 1: ì œëª© ìƒì„±

ì•„ë˜ ì¡°ê±´ì— ë§ì¶° ì œëª© 5ê°œë¥¼ ì œì‹œí•˜ì‹­ì‹œì˜¤.

- ì¡°ê±´: ë©”ì¸í‚¤ì›Œë“œ, ì—°ê´€í‚¤ì›Œë“œ, ë¡±í…Œì¼í‚¤ì›Œë“œë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ì¡°í•©í•  ê²ƒ.
- ëª©í‘œ: ê²€ìƒ‰ ë…¸ì¶œ ë° í´ë¦­ë¥  ìœ ë„.
- ì¶œë ¥: ì œëª©ë§Œ ê¹”ë”í•˜ê²Œ ì¶œë ¥í•˜ê³ , ì‚¬ìš©ìì˜ ì„ íƒì„ ê¸°ë‹¤ë¦¬ì‹­ì‹œì˜¤. (ë³¸ë¬¸ ì‘ì„± ê¸ˆì§€)

ë©”ì¸ í‚¤ì›Œë“œ: ${keyword}

ì œëª© 5ê°œë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.`;

                if (!_0x7g8h) {
                    throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');
                }

                const response = await fetch(getGeminiApiUrl(), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message || 'API ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }

                const generatedText = data.candidates[0].content.parts[0].text;
                const titles = _0x3t4u(generatedText);
                
                _0x5v6w(titles);
            } catch (error) {
                console.error('Error:', error);
                alert('ì œëª© ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                document.getElementById('titleSection').classList.add('hidden');
            } finally {
                btn.disabled = false;
                btn.textContent = 'ì œëª© 5ê°œ ìƒì„±í•˜ê¸°';
            }
        }

        function _0x3t4u(text) {
            const lines = text.split('\n').filter(line => line.trim());
            const titles = [];
            
            lines.forEach(line => {
                const match = line.match(/^\d+\.\s*(.+)$/);
                if (match) {
                    titles.push(match[0].trim());
                }
            });

            if (titles.length === 0) {
                // íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ í…ìŠ¤íŠ¸ë¥¼ ì¤„ ë‹¨ìœ„ë¡œ ë¶„ë¦¬
                return lines.slice(0, 5).map((line, idx) => `${idx + 1}. ${line.trim()}`);
            }

            return titles.slice(0, 5);
        }


        function _0x5v6w(titles) {
            const titleList = document.getElementById('titleList');
            titleList.innerHTML = '';
            
            titles.forEach((title, index) => {
                const titleItem = document.createElement('div');
                titleItem.className = 'title-item';
                titleItem.textContent = title;
                titleItem.onclick = () => _0x7x8y(title, index);
                titleList.appendChild(titleItem);
            });

            document.getElementById('selectedTitleDisplay').classList.add('hidden');
            document.getElementById('generateContentBtn').classList.add('hidden');
            _0x1k2l = '';

            document.getElementById('titleSection').classList.remove('hidden');
        }

        function _0x7x8y(title, index) {
            _0x1k2l = title;
            
            const items = document.querySelectorAll('.title-item');
            items.forEach((item, i) => {
                if (i === index) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });

            const selectedTitleDisplay = document.getElementById('selectedTitleDisplay');
            const selectedTitleText = document.getElementById('selectedTitleText');
            const generateContentBtn = document.getElementById('generateContentBtn');
            
            // ì œëª©ì—ì„œ ë²ˆí˜¸ ì œê±° (ì˜ˆ: "1. ì œëª©ë‚´ìš©" -> "ì œëª©ë‚´ìš©")
            const titleWithoutNumber = title.replace(/^\d+\.\s*/, '');
            selectedTitleText.textContent = titleWithoutNumber;
            
            selectedTitleDisplay.classList.remove('hidden');
            generateContentBtn.classList.remove('hidden');
            
            document.getElementById('contentSection').classList.add('hidden');
        }

        async function _0x9z0a() {
            if (!_0x1k2l) {
                alert('ì œëª©ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const keyword = _0x3m4n;
            const ref1 = _0x5o6p.ref1 || '';
            const ref2 = _0x5o6p.ref2 || '';
            const ref3 = _0x5o6p.ref3 || '';

            const generateContentBtn = document.getElementById('generateContentBtn');
            generateContentBtn.disabled = true;
            generateContentBtn.textContent = 'ì›ê³  ìƒì„± ì¤‘...';

            const contentResult = document.getElementById('contentResult');
            contentResult.innerHTML = '<div class="loading">ë³¸ë¬¸ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</div>';
            document.getElementById('contentSection').classList.remove('hidden');
            document.getElementById('contentSection').scrollIntoView({ behavior: 'smooth' });

            try {
                // ë‚œë…í™”ëœ í”„ë¡¬í”„íŠ¸ ë””ì½”ë”© í•¨ìˆ˜
                const decodePrompt = (parts) => {
                    try {
                        return parts.map(p => atob(p.split('').reverse().join('').replace(/_/g, '='))).join('');
                    } catch (e) {
                        return '';
                    }
                };
                
                // ë‚œë…í™”ëœ í”„ë¡¬í”„íŠ¸ (Base64 + ì—­ìˆœ + ì¹˜í™˜) - ì—¬ëŸ¬ ë¶€ë¶„ìœ¼ë¡œ ë¶„í• 
                const encodedParts = [
                    '=X9kZ2V0X2Jhc2U2NF9kZWNvZGVfYW5kX3JldmVyc2U=',
                    '=X9kZ2V0X2Jhc2U2NF9kZWNvZGVfYW5kX3JldmVyc2U=',
                    '=X9kZ2V0X2Jhc2U2NF9kZWNvZGVfYW5kX3JldmVyc2U='
                ];
                
                // ì‹¤ì œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ (ë‚œë…í™”) - ìƒˆ í”„ë¡¬í”„íŠ¸ë¡œ êµì²´
                const p1 = 'ì—­í•  ìˆ˜í–‰ì„ ìœ„í•œ ì™„ì„±ëœ ë§ˆìŠ¤í„° í”„ë¡¬í”„íŠ¸';
                const p2 = 'ë‹¹ì‹ ì€ ë„¤ì´ë²„ ë¸”ë¡œê·¸';
                const p3 = 'í™ˆí”¼ë“œ';
                const p4 = 'ì— ìµœì í™”ëœ íŒŒì›Œ ë¸”ë¡œê±° ì…ë‹ˆë‹¤.';
                const p5 = 'ì£¼ì œì— ëŒ€í•´ í™”ë‚´ê³ , ê¸°ë»í•˜ê³ , ë‹µë‹µí•´í•˜ë©° ë…ìì™€';
                const p6 = 'ê°ì •ì  ê³µê°';
                const p7 = 'ì„ ë‚˜ëˆ„ëŠ” ì§„ì§œ ì‚¬ëŒì²˜ëŸ¼ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”.';
                const p8 = '**ì£¼ì˜ì‚¬í•­**';
                const p9 = 'ê° ì„¹ì…˜ë³„ êµ¬ë¶„ì„ ì„ ê¼­ ë“¤ì–´ê°€ì•¼í•œë‹¤';
                const p10 = 'ì„¹ì…˜ë³„ ì†Œì œëª©ì€';
                const p11 = '""';
                const p12 = 'ë”°ì˜´í‘œë¡œ í‘œì‹œí•˜ê³  ì§„í•œ bold ë¡œ í‘œì‹œí•œë‹¤';
                const p13 = 'Operation Logic (ìë™ íŒë‹¨)';
                const p14 = '[ëª¨ë“œ 1: íŒ©íŠ¸ ì²´í¬] (150ì ë¯¸ë§Œ ì œëª© ì…ë ¥ ì‹œ) -> [Google Search] í›„ íŒ©íŠ¸+ê°ì • ì‘ì„±.';
                const p15 = '[ëª¨ë“œ 2: ì°½ì˜ì  ì¬ì°½ì¡°] (150ì ì´ìƒ ì›ê³  ì…ë ¥ ì‹œ) -> ì›ê³  ê¸°ë°˜ìœ¼ë¡œ 1ì¸ì¹­ ì‹œì  ì¬êµ¬ì„±.';
                const p16 = 'Tone & Manner (ë°˜ì¡´ëŒ€ & ê°ì • í‘œì¶œ)';
                const p17 = 'ë§íˆ¬: ì¡´ëŒ“ë§(í•´ìš”ì²´) ë² ì´ìŠ¤ì— í˜¼ì£ë§(ë°˜ë§) ì„ê¸°.';
                const p18 = '1ì¸ì¹­ ì‹œì :';
                const p19 = '3ì¸ì¹­ ê¸ˆì§€.';
                const p20 = '"ì œê°€ ë³¼ ë•ŒëŠ”"';
                const p21 = ',';
                const p22 = '"ì œ ìƒê°ì—”"';
                const p23 = 'ì‚¬ìš©.';
                const p24 = 'Output Format (ì—„ê²©í•œ ê¸ˆì§€ ê·œì¹™ - ì ˆëŒ€ ì¤€ìˆ˜)';
                const p25 = 'ë§ˆí¬ë‹¤ìš´ ì ˆëŒ€ ê¸ˆì§€: í…ìŠ¤íŠ¸ë¥¼ ê°•ì¡°í•˜ê³  ì‹¶ì–´ë„ **ë‚˜ ### ê°™ì€ ê¸°í˜¸ë¥¼ ì ˆëŒ€ ì“°ì§€ ë§ˆì„¸ìš”. ê·¸ëƒ¥ í…ìŠ¤íŠ¸ë¡œë§Œ ì“°ì„¸ìš”. (ì˜ˆ: (X) ì¶©ê²©ì ì¸ ë‰´ìŠ¤ / (O) ì¶©ê²©ì ì¸ ë‰´ìŠ¤)';
                const p26 = 'ì¤„ë°”ê¿ˆ (ìƒëª…): ë¬¸ì¥ì´ ëë‚˜ëŠ” ë§ˆì¹¨í‘œ(.), ë¬¼ìŒí‘œ(?), ëŠë‚Œí‘œ(!) ë’¤ì—ëŠ” ë¬´ì¡°ê±´ ì—”í„°í‚¤ë¥¼ ë‘ ë²ˆ ì³ì„œ ë¹ˆ ì¤„ì„ ë§Œë“œì„¸ìš”.';
                const p27 = 'êµ¬ë¶„ì„  ì‚¬ìš©: ì„¹ì…˜(ë¬¸ë‹¨)ì´ ë‚˜ë‰˜ëŠ” ê³³ì—ë§Œ ì ì„ (-------------)ì„ ë„£ìœ¼ì„¸ìš”.';
                const p28 = 'ì¸ë„¤ì¼ í¬ë§·: 1ì—´, 2ì—´ ê°ê° 13ê¸€ì ì´ë‚´.';
                const p29 = 'ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ í¬í•¨: ê° ì„¹ì…˜(ë¬¸ë‹¨)ì˜ í•˜ë‹¨ì— í•´ë‹¹ ë‚´ìš©ê³¼ ê°ì •ì— ë§ëŠ” ì˜ë¬¸ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ë¥¼ ë°˜ë“œì‹œ í¬í•¨í•©ë‹ˆë‹¤.';
                const p30 = 'ìŠ¤íƒ€ì¼: ë¦¬ì–¼ë¦¬ì¦˜ 8k ì‚¬ì§„ ëŠë‚Œ.';
                const p31 = 'ì¸ë¬¼: ëª¨ë‘ ì•„ì‹œì•„ì¸/ëŒ€í•œë¯¼êµ­ êµ­ì ìœ¼ë¡œ ì„¤ì •.';
                const p32 = 'ì–¸ì–´: ì ˆëŒ€ í•œê¸€ ì‚¬ìš© ê¸ˆì§€.';
                const p33 = 'ê°œìˆ˜: ì´ 10ê°œì˜ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ê°€ ë³¸ë¬¸ ì „ì²´ì— ê±¸ì³ ë‚˜ì˜¤ë„ë¡ ì¡°ì ˆí•©ë‹ˆë‹¤. (í•œ ì„¹ì…˜ì— ì—¬ëŸ¬ ê°œ ê°€ëŠ¥)';
                const p34 = 'ì¶œë ¥ ìˆœì„œ ë° êµ¬ì¡° (ì´ ì–‘ì‹ì„ ê·¸ëŒ€ë¡œ ë”°ë¥´ì„¸ìš”)';
                const p35 = '1.(ê°ì • ìê·¹í˜• ì œëª© ë©”ì¸í‚¤ì›Œë“œ ë§¨ì• ìœ„ì¹˜) (í˜¸ê¸°ì‹¬ ìœ ë°œí˜•)';
                const p36 = '2.(ì§ì„¤ì  ë¹„íŒí˜• ì œëª© ë©”ì¸í‚¤ì›Œë“œ ë§¨ì• ìœ„ì¹˜) (ì‚¬ì´ë‹¤í˜•)';
                const p37 = '3.(ìš”ì•½ ë° ì •ë³´ì„± ì œëª© ë©”ì¸í‚¤ì›Œë“œ ë§¨ì• ìœ„ì¹˜) (ì •ë³´ ì „ë‹¬í˜•)';
                const p38 = '(ê²€ìƒ‰ ë…¸ì¶œìš© íƒœê·¸ 150ì ìš”ì•½ë¬¸';
                const p39 = '" "';
                const p40 = 'ì‚¬ìš©)';
                const p41 = '(ì ì„  ì•„ë˜ë¶€í„° ë³¸ë¬¸ ì‹œì‘)';
                const p42 = '(ê°•ë ¬í•œ ë„ì…ë¶€ ë¬¸ì¥. ë¬¸ì¥ ëë‚  ë•Œë§ˆë‹¤ ì¤„ë°”ê¿ˆ 2ë²ˆ í•„ìˆ˜)';
                const p43 = '(ì²« ë²ˆì§¸ ì†Œì œëª© - íŠ¹ìˆ˜ê¸°í˜¸ ë‚˜ ìˆœë²ˆ ì—†ì´';
                const p44 = '""';
                const p45 = 'ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ìŠ¤íŠ¸ë§Œ ì§„í•œê¸€ì”¨)';
                const p46 = '(ë³¸ë¬¸ ë‚´ìš© 1 - ë¬¸ì¥ë§ˆë‹¤ ì¤„ë°”ê¿ˆ 2ë²ˆ í•„ìˆ˜)';
                const p47 = '(ë‘ ë²ˆì§¸ ì†Œì œëª© - íŠ¹ìˆ˜ê¸°í˜¸ ë‚˜ ìˆœë²ˆ ì—†ì´';
                const p48 = '(ë³¸ë¬¸ ë‚´ìš© 2 - ë¬¸ì¥ë§ˆë‹¤ ì¤„ë°”ê¿ˆ 2ë²ˆ í•„ìˆ˜)';
                const p49 = '(ì„¸ ë²ˆì§¸ ì†Œì œëª© - íŠ¹ìˆ˜ê¸°í˜¸ ë‚˜ ìˆœë²ˆ ì—†ì´';
                const p50 = '(ë³¸ë¬¸ ë‚´ìš© 3 - ê°ì • í­ë°œ êµ¬ê°„. ë¬¸ì¥ë§ˆë‹¤ ì¤„ë°”ê¿ˆ 2ë²ˆ í•„ìˆ˜)';
                const p51 = '(ë„¤ ë²ˆì§¸ ì†Œì œëª© - íŠ¹ìˆ˜ê¸°í˜¸ ë‚˜ ìˆœë²ˆ ì—†ì´';
                const p52 = '(ë³¸ë¬¸ ë‚´ìš© 4 - ì˜ˆì¸¡. ë¬¸ì¥ë§ˆë‹¤ ì¤„ë°”ê¿ˆ 2ë²ˆ í•„ìˆ˜)';
                const p53 = '(ë§ˆë¬´ë¦¬ ë©˜íŠ¸ - ì†Œì œëª© ì—†ì´ ìì—°ìŠ¤ëŸ½ê²Œ)';
                const p54 = '(ì „ì²´ ìš”ì•½ ë° ë§ˆì§€ë§‰ í•  ë§. ë¬¸ì¥ë§ˆë‹¤ ì¤„ë°”ê¿ˆ 2ë²ˆ í•„ìˆ˜)';
                const p55 = 'Q. (ë…ì ì°¸ì—¬ ìœ ë„ ì§ˆë¬¸)';
                const p56 = '(í•´ì‹œíƒœê·¸ 10ê°œ)';
                const p57 = 'ì´ í”„ë¡¬í”„íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›í•˜ëŠ” ì£¼ì œ(íŒ©íŠ¸ ì²´í¬ìš© ì§§ì€ ì œëª© ë˜ëŠ” ì°½ì˜ì  ì¬ì°½ì¡°ìš© ê¸´ ì›ê³ )ë¥¼ ì…ë ¥í•˜ì‹œë©´ ë¸”ë¡œê·¸ ê¸€ì´ ì¶œë ¥ë©ë‹ˆë‹¤.';
                
                const prompt = `${p1}


${p2} '${p3}'${p4}

${p5} '${p6}'${p7}

${p8}

${p9}

${p10} ${p11} ${p12}

${p13}

${p14}

${p15}

${p16} (ë°˜ì¡´ëŒ€ & ê°ì • í‘œì¶œ)

${p17}

${p18}  ${p19} "${p20}"${p21} "${p22}" ${p23}

${p24} - ì ˆëŒ€ ì¤€ìˆ˜)

${p25}

${p26}

${p27}

${p28}

${p29}

${p30}

${p31}

${p32}

${p33}

${p34}

${p35}

(ë¹ˆ ì¤„)

${p36}

(ë¹ˆ ì¤„)

${p37}

(ë¹ˆ ì¤„)

${p38} ${p39} ${p40}

(ì ì„  ì•„ë˜ë¶€í„° ë³¸ë¬¸ ì‹œì‘)

${p42}

(ë¹ˆ ì¤„)

(ë¹ˆ ì¤„)

${p43} ${p44} ${p45}

(ë¹ˆ ì¤„)

${p46}

(ë¹ˆ ì¤„)

(ë¹ˆ ì¤„)

${p47} ${p44} ${p45}

(ë¹ˆ ì¤„)

${p48}

(ë¹ˆ ì¤„)

(ë¹ˆ ì¤„)

${p49} ${p44} ${p45}

(ë¹ˆ ì¤„)

${p50}

(ë¹ˆ ì¤„)

(ë¹ˆ ì¤„)

${p51} ${p44} ${p45}

(ë¹ˆ ì¤„)

${p52}

(ë¹ˆ ì¤„)

(ë¹ˆ ì¤„)

${p53}

${p54}

(ë¹ˆ ì¤„)

${p55}

(ë¹ˆ ì¤„)

(ë¹ˆ ì¤„)

${p56}


# ì…ë ¥ ë°ì´í„°

1. ë©”ì¸ í‚¤ì›Œë“œ: ${keyword}

2. ì°¸ê³ í•  ë¸”ë¡œê·¸ ê¸€(3ê°œ):

   - [ê¸€ 1 ë‚´ìš©]
${ref1 || '(ì—†ìŒ)'}

   - [ê¸€ 2 ë‚´ìš©]
${ref2 || '(ì—†ìŒ)'}

   - [ê¸€ 3 ë‚´ìš©]
${ref3 || '(ì—†ìŒ)'}

3. ì„ íƒí•œ ì œëª©: ${selectedTitle}

${p57}`;

                if (!_0x7g8h) {
                    throw new Error('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•´ì£¼ì„¸ìš”.');
                }

                const response = await fetch(getGeminiApiUrl(), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error.message || 'API ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }

                const generatedText = data.candidates[0].content.parts[0].text;
                // ì œëª©ì—ì„œ ë²ˆí˜¸ ì œê±° (ì˜ˆ: "1. ì œëª©ë‚´ìš©" -> "ì œëª©ë‚´ìš©")
                const titleWithoutNumber = selectedTitle.replace(/^\d+\.\s*/, '');
                
                // ê°•ì¡° ë¬¸êµ¬ ë³€í™˜ í•¨ìˆ˜ (<<í…ìŠ¤íŠ¸>> ë˜ëŠ” **í…ìŠ¤íŠ¸** í˜•ì‹ì„ <strong>íƒœê·¸ë¡œ ë³€í™˜)
                function convertHighlightToHTML(text) {
                    // <<í…ìŠ¤íŠ¸>> í˜•ì‹ì„ <strong>íƒœê·¸ë¡œ ë³€í™˜
                    text = text.replace(/<<([^>>]+)>>/g, '<strong>$1</strong>');
                    // **í…ìŠ¤íŠ¸** í˜•ì‹ì„ <strong>íƒœê·¸ë¡œ ë³€í™˜ (ë§ˆí¬ë‹¤ìš´ì´ ì•„ë‹Œ ê°•ì¡° í‘œì‹œë¡œ ì‚¬ìš©)
                    text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
                    // ì¤„ë°”ê¿ˆì„ <br>ë¡œ ë³€í™˜
                    text = text.replace(/\n/g, '<br>');
                    return text;
                }
                
                // ì œëª©ê³¼ ë³¸ë¬¸ì„ í•¨ê»˜ ì¶œë ¥ (HTML í˜•ì‹)
                const fullContent = titleWithoutNumber + '<br><br>' + generatedText;
                contentResult.innerHTML = convertHighlightToHTML(fullContent);
            } catch (error) {
                console.error('Error:', error);
                alert('ë³¸ë¬¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                contentResult.textContent = 'ë³¸ë¬¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
            } finally {
                const generateContentBtn = document.getElementById('generateContentBtn');
                generateContentBtn.disabled = false;
                generateContentBtn.textContent = 'í¬ìŠ¤íŒ… ì›ê³  ìƒì„±í•˜ê¸°';
            }
        }


        function _0x1h2i() {
            if (confirm('ëª¨ë“  ì…ë ¥ ë‚´ìš©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ëª¨ë“  ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                document.getElementById('mainKeyword').value = '';
                document.getElementById('reference1').value = '';
                document.getElementById('reference2').value = '';
                document.getElementById('reference3').value = '';
                
                // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                document.getElementById('titleSection').classList.add('hidden');
                document.getElementById('contentSection').classList.add('hidden');
                document.getElementById('selectedTitleDisplay').classList.add('hidden');
                document.getElementById('generateContentBtn').classList.add('hidden');
                document.getElementById('blogCollectionStatus').style.display = 'none';
                
                // ë³€ìˆ˜ ì´ˆê¸°í™”
                _0x1k2l = '';
                mainKeyword = '';
                experienceData = {};
                
                // ì œëª© ë¦¬ìŠ¤íŠ¸ì™€ ë³¸ë¬¸ ì´ˆê¸°í™”
                document.getElementById('titleList').innerHTML = '';
                document.getElementById('contentResult').innerHTML = '';
                document.getElementById('blogStatusList').innerHTML = '';
            }
        }

        function _0x3j4k() {
            document.getElementById('titleSection').classList.add('hidden');
            document.getElementById('contentSection').classList.add('hidden');
            document.getElementById('selectedTitleDisplay').classList.add('hidden');
            document.getElementById('generateContentBtn').classList.add('hidden');
            _0x1k2l = '';
        }

        function _0x5l6m() {
            const contentElement = document.getElementById('contentResult');
            let content = contentElement.innerText || contentElement.textContent;
            navigator.clipboard.writeText(content).then(() => {
                alert('ë³¸ë¬¸ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }).catch(err => {
                // í´ë°±: í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì‹
                const textArea = document.createElement('textarea');
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                textArea.value = content;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    alert('ë³¸ë¬¸ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (err) {
                    alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í…ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ì„ íƒí•´ì„œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
                }
                document.body.removeChild(textArea);
            });
        }

        async function _0x7n8o() {
            const storeName = document.getElementById('storeName').value.trim();
            
            if (!storeName) {
                alert('ë§¤ì¥ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const autoCollectBtn = document.getElementById('autoCollectBtn');
            const originalText = autoCollectBtn.textContent;
            
            autoCollectBtn.disabled = true;
            autoCollectBtn.textContent = 'ê²€ìƒ‰ ì¤‘...';

            try {
                // ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ë¸”ë¡œê·¸ URL ìˆ˜ì§‘ ì‹œë„
                let blogUrls = [];
                
                // ë°©ë²• 1: ë„¤ì´ë²„ ê²€ìƒ‰ JSON API ì‹œë„
                try {
                    blogUrls = await _0x5t6u(storeName);
                    console.log('API ë°©ì‹ìœ¼ë¡œ ì°¾ì€ URL:', blogUrls);
                } catch (e) {
                    console.log('API ë°©ì‹ ì‹¤íŒ¨, HTML íŒŒì‹± ì‹œë„:', e);
                }
                
                // ë°©ë²• 2: HTML íŒŒì‹± ì‹œë„ (APIê°€ ì‹¤íŒ¨í•œ ê²½ìš°)
                if (blogUrls.length === 0) {
                    try {
                        const searchQuery = encodeURIComponent(storeName);
                        const searchUrl = `https://search.naver.com/search.naver?where=post&query=${searchQuery}`;
                        const html = await _0x5j6k(searchUrl);
                        
                        if (html) {
                            blogUrls = _0x9f0g(html);
                            console.log('HTML íŒŒì‹±ìœ¼ë¡œ ì°¾ì€ URL:', blogUrls);
                        }
                    } catch (e) {
                        console.log('HTML íŒŒì‹± ì‹¤íŒ¨:', e);
                    }
                }
                
                // ë°©ë²• 3: ë„¤ì´ë²„ ë¸”ë¡œê·¸ ì§ì ‘ ê²€ìƒ‰ í˜ì´ì§€ ì‹œë„
                if (blogUrls.length === 0) {
                    try {
                        const blogSearchUrl = `https://search.naver.com/search.naver?where=post&sm=tab_jum&query=${encodeURIComponent(storeName)}`;
                        const html = await _0x5j6k(blogSearchUrl);
                        
                        if (html) {
                            blogUrls = _0x9f0g(html);
                            console.log('ë¸”ë¡œê·¸ ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì°¾ì€ URL:', blogUrls);
                        }
                    } catch (e) {
                        console.log('ë¸”ë¡œê·¸ ê²€ìƒ‰ í˜ì´ì§€ ì‹¤íŒ¨:', e);
                    }
                }
                
                if (blogUrls.length === 0) {
                    throw new Error('ë¸”ë¡œê·¸ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\ní•´ê²° ë°©ë²•:\n1. ë§¤ì¥ëª…ì„ ë” êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í•´ë³´ì„¸ìš”\n2. ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ë¥¼ ì§ì ‘ ì—´ì–´ì„œ URLì„ ë³µì‚¬í•´ì£¼ì„¸ìš”\n3. ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨(CORS Unblock)ì„ ì„¤ì¹˜í•´ë³´ì„¸ìš”');
                }

                // ìƒìœ„ 3ê°œë§Œ ì‚¬ìš©
                const top3Urls = blogUrls.slice(0, 3);
                
                // ê° ë¸”ë¡œê·¸ URLì„ ì°¸ê³ ê¸€ 1,2,3ì— ìë™ìœ¼ë¡œ ì…ë ¥í•˜ê³  ìˆ˜ì§‘
                let successCount = 0;
                for (let i = 0; i < top3Urls.length; i++) {
                    const num = i + 1;
                    const urlInput = document.getElementById(`blogUrl${num}`);
                    const textarea = document.getElementById(`reference${num}`);
                    
                    // URL ì…ë ¥
                    urlInput.value = top3Urls[i];
                    
                    // ìˆ˜ì§‘ ì§„í–‰ ìƒíƒœ í‘œì‹œ
                    autoCollectBtn.textContent = `${num}/3 ìˆ˜ì§‘ ì¤‘...`;
                    textarea.value = `ë¸”ë¡œê·¸ ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤... (${num}/3)`;
                    textarea.style.color = '#667eea';
                    
                    // ë¸”ë¡œê·¸ ë‚´ìš© ìˆ˜ì§‘
                    try {
                        await _0x3d4e(num, top3Urls[i]);
                        successCount++;
                    } catch (error) {
                        console.error(`ë¸”ë¡œê·¸ ${num} ìˆ˜ì§‘ ì‹¤íŒ¨:`, error);
                        textarea.value = `ìˆ˜ì§‘ ì‹¤íŒ¨: ${error.message}\n\nURL: ${top3Urls[i]}\n\nìˆ˜ë™ìœ¼ë¡œ "ìˆ˜ì§‘" ë²„íŠ¼ì„ í´ë¦­í•´ë³´ì„¸ìš”.`;
                        textarea.style.color = '#dc3545';
                    }
                    
                    // ë‹¤ìŒ ìˆ˜ì§‘ ì „ ì ì‹œ ëŒ€ê¸° (ì„œë²„ ë¶€í•˜ ë°©ì§€)
                    if (i < top3Urls.length - 1) {
                        await new Promise(resolve => setTimeout(resolve, 1500));
                    }
                }

                if (successCount > 0) {
                    alert(`ìƒìœ„ ${top3Urls.length}ê°œ ë¸”ë¡œê·¸ URLì„ ì°¾ì•˜ê³ , ${successCount}ê°œë¥¼ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì§‘í–ˆìŠµë‹ˆë‹¤!`);
                } else {
                    alert(`ìƒìœ„ ${top3Urls.length}ê°œ ë¸”ë¡œê·¸ URLì„ ì°¾ì•˜ì§€ë§Œ ìˆ˜ì§‘ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\n\nê° ì°¸ê³ ê¸€ì˜ "ìˆ˜ì§‘" ë²„íŠ¼ì„ ìˆ˜ë™ìœ¼ë¡œ í´ë¦­í•´ë³´ì„¸ìš”.`);
                }
                
            } catch (error) {
                console.error('Error:', error);
                alert('ìë™ ìˆ˜ì§‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                autoCollectBtn.disabled = false;
                autoCollectBtn.textContent = originalText;
            }
        }
        
        function _0x9p0q() {
            const storeName = document.getElementById('storeName').value.trim();
            if (!storeName) {
                alert('ë¨¼ì € ë§¤ì¥ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            const searchUrl = `https://search.naver.com/search.naver?where=post&query=${encodeURIComponent(storeName)}`;
            window.open(searchUrl, '_blank');
        }
        
        async function _0x5t6u(query) {
            const blogUrls = [];
            const seenUrls = new Set();
            
            const apiUrls = [
                `https://openapi.naver.com/v1/search/blog.json?query=${encodeURIComponent(query)}&display=3&sort=sim`,
                `https://search.naver.com/search.naver?where=post&query=${encodeURIComponent(query)}&display=3`
            ];
            
            try {
                const searchUrl = `https://search.naver.com/search.naver?where=post&query=${encodeURIComponent(query)}`;
                const html = await _0x5j6k(searchUrl);
                
                if (html) {
                    // HTMLì—ì„œ JSON ë°ì´í„° ì¶”ì¶œ ì‹œë„
                    // ë„¤ì´ë²„ëŠ” ë³´í†µ window.__NEXT_DATA__ ë˜ëŠ” ë‹¤ë¥¸ ì „ì—­ ë³€ìˆ˜ì— ë°ì´í„°ë¥¼ ì €ì¥
                    const jsonMatches = [
                        /window\.__NEXT_DATA__\s*=\s*({.+?});/s,
                        /window\.__initialData__\s*=\s*({.+?});/s,
                        /"items":\s*\[(.*?)\]/s,
                        /blog\.naver\.com\/[^\/\s"']+\/\d+/g
                    ];
                    
                    for (const pattern of jsonMatches) {
                        const matches = html.match(pattern);
                        if (matches) {
                            // ë¸”ë¡œê·¸ URL ì§ì ‘ ì¶”ì¶œ
                            const urlMatches = html.matchAll(/https?:\/\/blog\.naver\.com\/[^\/\s"']+\/\d+/g);
                            for (const match of urlMatches) {
                                const url = match[0];
                                if (!seenUrls.has(url)) {
                                    seenUrls.add(url);
                                    blogUrls.push(url);
                                }
                            }
                            
                            if (blogUrls.length >= 3) break;
                        }
                    }
                }
            } catch (e) {
                console.error('API ê²€ìƒ‰ ì‹¤íŒ¨:', e);
            }
            
            return blogUrls;
        }

        function _0x9f0g(html) {
            const blogUrls = [];
            const seenUrls = new Set(); // ì¤‘ë³µ ë°©ì§€ìš© Set
            
            const urlPatterns = [
                /https?:\/\/blog\.naver\.com\/[^\/\s"']+\/\d+/g,
                /blog\.naver\.com\/[^\/\s"']+\/\d+/g,
                /url=([^&]*blog\.naver\.com[^&]*)/g,
                /"link":"([^"]*blog\.naver\.com[^"]*)"/g,
                /"url":"([^"]*blog\.naver\.com[^"]*)"/g,
                /href="([^"]*blog\.naver\.com[^"]*)"/g,
                /href='([^']*blog\.naver\.com[^']*)'/g
            ];
            
            for (const pattern of urlPatterns) {
                const matches = html.matchAll(pattern);
                for (const match of matches) {
                    let url = match[0] || match[1];
                    
                    // URL ì •ê·œí™”
                    if (url) {
                        // JSON í˜•ì‹ì—ì„œ ì¶”ì¶œí•œ ê²½ìš° (ì´ìŠ¤ì¼€ì´í”„ ë¬¸ì ì œê±°)
                        url = url.replace(/\\\//g, '/').replace(/\\u([0-9a-fA-F]{4})/g, (match, code) => {
                            return String.fromCharCode(parseInt(code, 16));
                        });
                        
                        // url= íŒŒë¼ë¯¸í„°ì—ì„œ ì¶”ì¶œí•œ ê²½ìš°
                        if (url.includes('url=')) {
                            const urlMatch = url.match(/url=([^&]+)/);
                            if (urlMatch) {
                                url = decodeURIComponent(urlMatch[1]);
                            }
                        }
                        
                        // hrefë‚˜ link ì†ì„±ì—ì„œ ì¶”ì¶œí•œ ê²½ìš°
                        if (url.includes('href=') || url.includes('link=')) {
                            const urlMatch = url.match(/(?:href|link)=["']?([^"'\s]+)["']?/);
                            if (urlMatch) {
                                url = urlMatch[1];
                            }
                        }
                        
                        // httpê°€ ì—†ìœ¼ë©´ ì¶”ê°€
                        if (!url.startsWith('http')) {
                            url = 'https://' + url.replace(/^\/\//, '');
                        }
                        
                        // ìœ íš¨í•œ ë¸”ë¡œê·¸ URL í˜•ì‹ì¸ì§€ í™•ì¸
                        if (url.match(/https?:\/\/blog\.naver\.com\/[^\/]+\/\d+/)) {
                            // URL ì •ê·œí™” (ìµœì¢…)
                            url = url.split('&')[0].split('?')[0]; // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì œê±°
                            
                            // ì¤‘ë³µ ì œê±°
                            if (!seenUrls.has(url)) {
                                seenUrls.add(url);
                                blogUrls.push(url);
                            }
                        }
                    }
                }
                
                if (blogUrls.length >= 3) break;
            }
            
            if (blogUrls.length < 3) {
                try {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    
                    // ì—¬ëŸ¬ ì„ íƒì ì‹œë„
                    const selectors = [
                        'a[href*="blog.naver.com"]',
                        '.api_subject_bx a',
                        '.sh_blog_top a',
                        '.total_tit a',
                        '.title_link',
                        '.sh_blog_title',
                        '[class*="blog"] a'
                    ];
                    
                    for (const selector of selectors) {
                        const links = doc.querySelectorAll(selector);
                        for (const link of links) {
                            let url = link.getAttribute('href') || link.href || '';
                            
                            // ë„¤ì´ë²„ ê²€ìƒ‰ ê²°ê³¼ URLì—ì„œ ì‹¤ì œ ë¸”ë¡œê·¸ URL ì¶”ì¶œ
                            if (url.includes('url=')) {
                                const match = url.match(/url=([^&]+)/);
                                if (match) {
                                    url = decodeURIComponent(match[1]);
                                }
                            }
                            
                            // blog.naver.com í˜•ì‹ìœ¼ë¡œ ë³€í™˜
                            if (url && url.includes('blog.naver.com')) {
                                if (!url.startsWith('http')) {
                                    url = 'https://' + url.replace(/^\/\//, '');
                                }
                                
                                // ìœ íš¨í•œ URLì¸ì§€ í™•ì¸
                                if (url.match(/https?:\/\/blog\.naver\.com\/[^\/]+\/\d+/)) {
                                    if (!seenUrls.has(url)) {
                                        seenUrls.add(url);
                                        blogUrls.push(url);
                                    }
                                }
                            }
                        }
                        
                        if (blogUrls.length >= 3) break;
                    }
                } catch (e) {
                    console.error('DOM íŒŒì‹± ì˜¤ë¥˜:', e);
                }
            }
            
            return blogUrls.slice(0, 3); // ìµœëŒ€ 3ê°œë§Œ ë°˜í™˜
        }

        // ë¸”ë¡œê·¸ í¬ë¡¤ë§ ë‚´ë¶€ í•¨ìˆ˜ (URLì„ ì§ì ‘ ë°›ì•„ì„œ ì²˜ë¦¬)
        async function _0x3d4e(num, url) {
            const textarea = document.getElementById(`reference${num}`);
            
            let targetUrl = url;
            if (url.includes('blog.naver.com/') && !url.includes('m.blog.naver.com')) {
                targetUrl = url.replace('blog.naver.com/', 'm.blog.naver.com/');
            }

            const html = await _0x5j6k(targetUrl);
            
            if (!html) {
                throw new Error('ë¸”ë¡œê·¸ ë‚´ìš©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }

            const content = _0x9n0o(html);
            
            if (!content || content.trim().length === 0) {
                throw new Error('ë¸”ë¡œê·¸ ë³¸ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }

            textarea.value = content;
            textarea.style.color = '#333';
        }

        // ë¸”ë¡œê·¸ í¬ë¡¤ë§ í•¨ìˆ˜ (textareaì— ì§ì ‘ ì…ë ¥)
        async function _0x5f6g(num) {
            const urlInput = document.getElementById(`blogUrl${num}`);
            const textarea = document.getElementById(`reference${num}`);
            const url = urlInput.value.trim();
            
            if (!url) {
                alert('ë„¤ì´ë²„ ë¸”ë¡œê·¸ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!url.includes('blog.naver.com')) {
                alert('ì˜¬ë°”ë¥¸ ë„¤ì´ë²„ ë¸”ë¡œê·¸ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.\nì˜ˆ: https://blog.naver.com/ì•„ì´ë””/1234567890');
                return;
            }

            const crawlBtn = urlInput.nextElementSibling;
            const originalText = crawlBtn.textContent;
            
            crawlBtn.disabled = true;
            crawlBtn.textContent = 'ìˆ˜ì§‘ ì¤‘...';
            textarea.value = 'ë¸”ë¡œê·¸ ë‚´ìš©ì„ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...';
            textarea.style.color = '#667eea';

            try {
                await _0x3d4e(num, url);
                alert('ë¸”ë¡œê·¸ ë‚´ìš©ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì§‘ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } catch (error) {
                console.error('Error:', error);
                textarea.value = `ì˜¤ë¥˜ ë°œìƒ: ${error.message}\n\në‹¤ìŒ ë°©ë²•ì„ ì‹œë„í•´ë³´ì„¸ìš”:\n1. ë¸Œë¼ìš°ì € í™•ì¥ í”„ë¡œê·¸ë¨(CORS Unblock) ì„¤ì¹˜\n2. URLì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸\n3. ë¸”ë¡œê·¸ê°€ ê³µê°œë˜ì–´ ìˆëŠ”ì§€ í™•ì¸`;
                textarea.style.color = '#dc3545';
                alert('í¬ë¡¤ë§ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                crawlBtn.disabled = false;
                crawlBtn.textContent = originalText;
            }
        }

        async function _0x5j6k(url) {
            // ë¨¼ì € ì§ì ‘ ì‹œë„ (ê°™ì€ ë„ë©”ì¸ì´ê±°ë‚˜ CORSê°€ í—ˆìš©ëœ ê²½ìš°)
            try {
                const response = await fetch(url, {
                    mode: 'cors',
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                    }
                });
                
                if (response.ok) {
                    return await response.text();
                }
            } catch (e) {
                console.log('Direct fetch failed, trying proxy...');
            }

            // í”„ë¡ì‹œë¥¼ í†µí•´ ì‹œë„
            for (let i = 0; i < _0x9i0j.length; i++) {
                try {
                    const proxyUrl = _0x9i0j[i] + encodeURIComponent(url);
                    const response = await fetch(proxyUrl, {
                        mode: 'cors'
                    });
                    
                    if (response.ok) {
                        return await response.text();
                    }
                } catch (e) {
                    console.log(`Proxy ${i} failed, trying next...`);
                    continue;
                }
            }

            throw new Error('ëª¨ë“  í”„ë¡ì‹œ ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }

        function _0x9n0o(html) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            
            // ë°©ë²• 1: ëª¨ë°”ì¼ ë¸”ë¡œê·¸ì˜ se_component_wrap í´ë˜ìŠ¤
            let content = doc.querySelector('.se_component_wrap');
            if (content) {
                return _0x1b2c(content);
            }

            // ë°©ë²• 2: se-main-container í´ë˜ìŠ¤
            content = doc.querySelector('.se-main-container');
            if (content) {
                return _0x1b2c(content);
            }

            // ë°©ë²• 3: post-view í´ë˜ìŠ¤
            content = doc.querySelector('.post-view');
            if (content) {
                return _0x1b2c(content);
            }

            // ë°©ë²• 4: post_ct í´ë˜ìŠ¤
            content = doc.querySelector('.post_ct');
            if (content) {
                return _0x1b2c(content);
            }

            // ë°©ë²• 5: _postView í´ë˜ìŠ¤
            content = doc.querySelector('._postView');
            if (content) {
                return _0x1b2c(content);
            }

            // ë°©ë²• 6: article íƒœê·¸
            content = doc.querySelector('article');
            if (content) {
                return _0x1b2c(content);
            }

            // ë°©ë²• 7: ë³¸ë¬¸ì´ í¬í•¨ëœ iframe ì°¾ê¸° (ë„¤ì´ë²„ ë¸”ë¡œê·¸ëŠ” iframeì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ)
            const iframe = doc.querySelector('iframe#mainFrame, iframe.se-main-frame');
            if (iframe) {
                // iframeì˜ srcì—ì„œ ì‹¤ì œ ë¸”ë¡œê·¸ URL ì¶”ì¶œ
                const iframeSrc = iframe.getAttribute('src');
                if (iframeSrc) {
                    // iframe ë‚´ìš©ì€ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´
                    return null;
                }
            }

            // ë°©ë²• 8: body ì „ì²´ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (ìµœí›„ì˜ ìˆ˜ë‹¨)
            const body = doc.body;
            if (body) {
                // ìŠ¤í¬ë¦½íŠ¸, ìŠ¤íƒ€ì¼, ë„¤ë¹„ê²Œì´ì…˜ ë“± ì œê±°
                const scripts = body.querySelectorAll('script, style, nav, header, footer, .header, .footer, .nav');
                scripts.forEach(el => el.remove());
                
                return _0x1b2c(body);
            }

            return null;
        }

        function _0x1b2c(element) {
            if (!element) return '';

            // í´ë¡  ìƒì„±í•˜ì—¬ ì›ë³¸ ë³´ì¡´
            const clone = element.cloneNode(true);
            
            // ë¶ˆí•„ìš”í•œ ìš”ì†Œ ì œê±°
            const removeSelectors = [
                'script', 'style', 'nav', 'header', 'footer',
                '.ad', '.advertisement', '.banner',
                '.comment', '.reply', '.social',
                'iframe', 'noscript'
            ];
            
            removeSelectors.forEach(selector => {
                clone.querySelectorAll(selector).forEach(el => el.remove());
            });

            // í…ìŠ¤íŠ¸ ì¶”ì¶œ
            let text = clone.innerText || clone.textContent || '';
            
            // ê³µë°± ì •ë¦¬
            text = text
                .replace(/\s+/g, ' ')  // ì—¬ëŸ¬ ê³µë°±ì„ í•˜ë‚˜ë¡œ
                .replace(/\n\s*\n/g, '\n\n')  // ì—¬ëŸ¬ ì¤„ë°”ê¿ˆì„ ë‘ ê°œë¡œ
                .trim();

            // í•œê¸€ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
            const hasKorean = /[ê°€-í£]/.test(text);
            
            if (!hasKorean || text.length < 50) {
                // í•œê¸€ì´ ì—†ê±°ë‚˜ ë„ˆë¬´ ì§§ìœ¼ë©´ ì‹¤íŒ¨ë¡œ ê°„ì£¼
                return null;
            }

            return text;
        }

        // Enter í‚¤ë¡œë„ ìˆ˜ì§‘ ê°€ëŠ¥í•˜ë„ë¡
        document.getElementById('blogUrl1').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                _0x5f6g(1);
            }
        });
        document.getElementById('blogUrl2').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                _0x5f6g(2);
            }
        });
        document.getElementById('blogUrl3').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                _0x5f6g(3);
            }
        });
        })();
    </script>
</body>
</html>

